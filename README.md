# ä½“é‡ç®¡ç†åŠ©æ‰‹

AIé©±åŠ¨çš„ä¸ªæ€§åŒ–ä½“é‡ç®¡ç†ä¼™ä¼´ - åç«¯æœåŠ¡

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

ç¡®ä¿å·²å®‰è£…ï¼š
- Python 3.9+
- pip

### 2. é…ç½®é¡¹ç›®

```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡ç¤ºä¾‹æ–‡ä»¶
cp .env.example .env

# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥å¿…è¦é…ç½®
# ç‰¹åˆ«æ˜¯ OPENAI_API_KEYï¼ˆä» https://platform.openai.com/api-keys è·å–ï¼‰
```

### 3. æ•°æ®åº“åˆå§‹åŒ–

åº”ç”¨ä½¿ç”¨SQLiteæ•°æ®åº“ï¼Œé¦–æ¬¡è¿è¡Œæ—¶ä¼šè‡ªåŠ¨åˆ›å»ºæ•°æ®åº“æ–‡ä»¶ã€‚

#### è‡ªåŠ¨åˆå§‹åŒ–ï¼ˆæ¨èï¼‰
ç›´æ¥å¯åŠ¨åº”ç”¨ï¼Œæ•°æ®åº“ä¼šè‡ªåŠ¨åˆ›å»ºï¼š
```bash
python main_new.py
```

#### æ‰‹åŠ¨åˆå§‹åŒ–
å¦‚æœéœ€è¦æ‰‹åŠ¨åˆå§‹åŒ–æ•°æ®åº“ï¼š
```bash
python scripts/init_database.py
```

### 4. å¯åŠ¨åº”ç”¨

#### æ–¹æ³•ä¸€ï¼šä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
chmod +x start.sh
./start.sh
```

#### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨å¯åŠ¨

```bash
# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# å¯åŠ¨åº”ç”¨
python main_new.py
```

### 4. è®¿é—®æœåŠ¡

- ä¸»æœåŠ¡ï¼šhttp://localhost:8000
- API æ–‡æ¡£ï¼šhttp://localhost:8000/docs
- å¥åº·æ£€æŸ¥ï¼šhttp://localhost:8000/health

## ğŸ“ é¡¹ç›®ç»“æ„

```
weight-management/
â”œâ”€â”€ main_new.py              # FastAPI ä¸»ç¨‹åº
â”œâ”€â”€ requirements.txt         # ä¾èµ–åˆ—è¡¨
â”œâ”€â”€ .env.example            # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”œâ”€â”€ start.sh                # å¯åŠ¨è„šæœ¬
â”œâ”€â”€ config/                 # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ settings.py         # åº”ç”¨é…ç½®
â”‚   â””â”€â”€ logging_config.py   # æ—¥å¿—é…ç½®
â”œâ”€â”€ api/                    # API è·¯ç”±
â”‚   â”œâ”€â”€ routes/            # è·¯ç”±å¤„ç†
â”‚   â””â”€â”€ dependencies.py    # ä¾èµ–æ³¨å…¥
â”œâ”€â”€ models/                 # æ•°æ®åº“æ¨¡å‹
â”‚   â””â”€â”€ database.py        # SQLAlchemy æ¨¡å‹
â”œâ”€â”€ services/              # ä¸šåŠ¡é€»è¾‘æœåŠ¡
â”œâ”€â”€ schemas/               # Pydantic æ¨¡å‹
â”œâ”€â”€ utils/                 # å·¥å…·å‡½æ•°
â”œâ”€â”€ static/                # é™æ€æ–‡ä»¶
â”œâ”€â”€ uploads/               # ä¸Šä¼ æ–‡ä»¶å­˜å‚¨
â”œâ”€â”€ logs/                  # æ—¥å¿—æ–‡ä»¶
â””â”€â”€ docs/                  # æ–‡æ¡£
    â””â”€â”€ plans/             # è®¾è®¡æ–‡æ¡£
        â”œâ”€â”€ 2025-02-07-weight-management-design.md
        â””â”€â”€ 2025-02-07-weight-management-design.pdf
```

## âš™ï¸ ç¯å¢ƒå˜é‡é…ç½®

| å˜é‡å | è¯´æ˜ | é»˜è®¤å€¼ |
|--------|------|--------|
| `DEBUG` | è°ƒè¯•æ¨¡å¼ | `true` |
| `DATABASE_URL` | æ•°æ®åº“è¿æ¥ | SQLite |
| `OPENAI_API_KEY` | OpenAI API å¯†é’¥ | å¿…å¡« |
| `OPENAI_MODEL` | AI æ¨¡å‹ | `gpt-4` |
| `WECHAT_APPID` | å¾®ä¿¡å°ç¨‹åº AppID | å¯é€‰ |
| `WECHAT_SECRET` | å¾®ä¿¡å°ç¨‹åº Secret | å¯é€‰ |
| `SECRET_KEY` | åº”ç”¨å¯†é’¥ | è¯·ä¿®æ”¹ |

## ğŸ› ï¸ å¼€å‘

### ä»£ç æ ¼å¼åŒ–

```bash
# ä½¿ç”¨ black æ ¼å¼åŒ–
black .

# ä½¿ç”¨ isort æ’åºå¯¼å…¥
isort .

# ä»£ç æ£€æŸ¥
flake8
mypy
```

### è¿è¡Œæµ‹è¯•

```bash
pytest
```

## ğŸ“š æ–‡æ¡£

- [å®Œæ•´è®¾è®¡æ–‡æ¡£](./docs/plans/2025-02-07-weight-management-design.md)
- [PDF ç‰ˆæœ¬](./docs/plans/2025-02-07-weight-management-design.pdf)
- [æ•°æ®åº“ç»“æ„æ–‡æ¡£](./docs/database_schema.md)

## â“ å¸¸è§é—®é¢˜

### æ•°æ®åº“ç›¸å…³é—®é¢˜

**Q: æ•°æ®åº“æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ**
A: æ•°æ®åº“æ–‡ä»¶ `weight_management.db` åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºã€‚è¯¥æ–‡ä»¶åœ¨ `.gitignore` ä¸­æ’é™¤ï¼Œä¸ä¼šæäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ã€‚

**Q: å¦‚ä½•é‡ç½®æ•°æ®åº“ï¼Ÿ**
A: åˆ é™¤ `weight_management.db` æ–‡ä»¶ï¼Œç„¶åé‡æ–°å¯åŠ¨åº”ç”¨æˆ–è¿è¡Œ `python scripts/init_database.py`ã€‚

**Q: æ•°æ®åº“ä¼šè‡ªåŠ¨å¤‡ä»½å—ï¼Ÿ**
A: ç›®å‰éœ€è¦æ‰‹åŠ¨å¤‡ä»½ã€‚å»ºè®®å®šæœŸå¤‡ä»½æ•°æ®åº“æ–‡ä»¶ï¼š
```bash
cp weight_management.db weight_management_backup_$(date +%Y%m%d).db
```

**Q: å¦‚ä½•æŸ¥çœ‹æ•°æ®åº“å†…å®¹ï¼Ÿ**
A: å¯ä»¥ä½¿ç”¨SQLiteå‘½ä»¤è¡Œå·¥å…·æˆ–SQLiteæµè§ˆå™¨ï¼š
```bash
sqlite3 weight_management.db
.tables  # æŸ¥çœ‹æ‰€æœ‰è¡¨
.schema users  # æŸ¥çœ‹ç”¨æˆ·è¡¨ç»“æ„
SELECT * FROM users LIMIT 5;  # æŸ¥çœ‹å‰5æ¡ç”¨æˆ·æ•°æ®
```

**Q: æ•°æ®åº“è¿ç§»å¦‚ä½•å¤„ç†ï¼Ÿ**
A: ç›®å‰ä½¿ç”¨SQLAlchemyçš„è‡ªåŠ¨å»ºè¡¨åŠŸèƒ½ã€‚å¦‚éœ€è¿ç§»ï¼Œå¯ä»¥ï¼š
1. å¤‡ä»½å½“å‰æ•°æ®åº“
2. ä¿®æ”¹æ¨¡å‹å®šä¹‰
3. åˆ é™¤æ—§æ•°æ®åº“æ–‡ä»¶
4. é‡æ–°å¯åŠ¨åº”ç”¨åˆ›å»ºæ–°æ•°æ®åº“

## ğŸ“„ è®¸å¯è¯

MIT License
