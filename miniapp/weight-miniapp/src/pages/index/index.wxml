<!-- é¦–é¡µ - æ•°æ®æ€»è§ˆ -->
<view class="container">
  <!-- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->
  <view class="user-card">
    <view class="user-info">
      <image class="avatar" src="{{userInfo.avatar || '/assets/default-avatar.png'}}" />
      <view class="user-detail">
        <text class="nickname">{{userInfo.nickname || 'ç”¨æˆ·'}}</text>
        <text class="slogan">{{agentName}}é™ªä½ ä¸€èµ·å˜å¥åº·</text>
      </view>
    </view>
  </view>

  <!-- ä»Šæ—¥æ•°æ®æ¦‚è§ˆ -->
  <view class="card">
    <view class="card-title">
      <text class="card-title-icon">ğŸ“Š</text>
      <text>ä»Šæ—¥æ¦‚è§ˆ</text>
    </view>
    
    <view class="stats-grid">
      <view class="stat-item" bindtap="goToWeight">
        <text class="stat-value {{weightChange < 0 ? 'text-success' : ''}}">{{todayData.weight || '--'}}</text>
        <text class="stat-label">ä½“é‡(kg)</text>
        <text class="stat-change" wx:if="{{weightChange}}">{{weightChange > 0 ? '+' : ''}}{{weightChange}}</text>
      </view>
      
      <view class="stat-item" bindtap="goToMeal">
        <text class="stat-value">{{todayData.calories || 0}}</text>
        <text class="stat-label">æ‘„å…¥(åƒå¡)</text>
      </view>
      
      <view class="stat-item" bindtap="goToExercise">
        <text class="stat-value">{{todayData.exerciseMinutes || 0}}</text>
        <text class="stat-label">è¿åŠ¨(åˆ†é’Ÿ)</text>
      </view>
      
      <view class="stat-item" bindtap="goToWater">
        <text class="stat-value {{waterProgress >= 100 ? 'text-success' : ''}}">{{todayData.water || 0}}</text>
        <text class="stat-label">é¥®æ°´(ml)</text>
        <progress percent="{{waterProgress}}" stroke-width="4" color="#3498db" class="water-progress" />
      </view>
    </view>
  </view>

  <!-- å¿«æ·æ“ä½œ -->
  <view class="card">
    <view class="card-title">
      <text class="card-title-icon">âš¡</text>
      <text>å¿«æ·è®°å½•</text>
    </view>
    
    <view class="quick-actions">
      <view class="action-btn" bindtap="quickRecord" data-type="weight">
        <text class="action-icon">âš–ï¸</text>
        <text class="action-text">è®°ä½“é‡</text>
      </view>
      <view class="action-btn" bindtap="quickRecord" data-type="meal">
        <text class="action-icon">ğŸ½ï¸</text>
        <text class="action-text">è®°é¤é£Ÿ</text>
      </view>
      <view class="action-btn" bindtap="quickRecord" data-type="water">
        <text class="action-icon">ğŸ’§</text>
        <text class="action-text">è®°é¥®æ°´</text>
      </view>
      <view class="action-btn" bindtap="quickRecord" data-type="exercise">
        <text class="action-icon">ğŸƒ</text>
        <text class="action-text">è®°è¿åŠ¨</text>
      </view>
    </view>
  </view>

  <!-- æœ¬å‘¨ç›®æ ‡è¿›åº¦ -->
  <view class="card" wx:if="{{weeklyGoal}}">
    <view class="card-title">
      <text class="card-title-icon">ğŸ¯</text>
      <text>æœ¬å‘¨ç›®æ ‡</text>
    </view>
    
    <view class="goal-item">
      <text class="goal-label">å‡é‡ç›®æ ‡</text>
      <view class="goal-progress">
        <progress percent="{{goalProgress}}" stroke-width="8" color="#3498db" />
        <text class="goal-text">{{weeklyGoal.current}} / {{weeklyGoal.target}} kg</text>
      </view>
    </view>
  </view>

  <!-- æœ€æ–°å‘¨æŠ¥ -->
  <view class="card" wx:if="{{latestReport}}">
    <view class="card-title">
      <text class="card-title-icon">ğŸ“ˆ</text>
      <text>æœ€æ–°å‘¨æŠ¥</text>
      <text class="view-more" bindtap="viewReport">æŸ¥çœ‹ ></text>
    </view>
    
    <view class="report-preview">
      <text class="report-summary">{{latestReport.summary}}</text>
      <view class="report-highlights">
        <view class="highlight-tag" wx:for="{{latestReport.highlights}}" wx:key="index">
          {{item}}
        </view>
      </view>
    </view>
  </view>

  <!-- åº•éƒ¨å ä½ -->
  <view style="height: 40rpx;"></view>
</view>
