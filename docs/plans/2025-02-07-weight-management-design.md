# ä½“é‡ç®¡ç†åŠ©æ‰‹ - å®Œæ•´è®¾è®¡æ–‡æ¡£

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0  
**åˆ›å»ºæ—¥æœŸ**: 2025-02-07  
**çŠ¶æ€**: åˆç‰ˆè®¾è®¡ï¼ŒæŒç»­è¿­ä»£

---

## ä¸€ã€äº§å“å®šä½

**æ ¸å¿ƒå®šä½**ï¼šä»¥AIå¯¹è¯ä¸ºæ ¸å¿ƒçš„ä¸ªæ€§åŒ–ä½“é‡ç®¡ç†ä¼™ä¼´  
**å·®å¼‚åŒ–å–ç‚¹**ï¼š
- **æ·±åº¦ä¸ªæ€§åŒ–**ï¼šè®°ä½ç”¨æˆ·æ‰€æœ‰ä¹ æƒ¯ã€åå¥½ã€å†å²ï¼Œåƒè€æœ‹å‹ä¸€æ ·æ‡‚ä½ 
- **å¯¹è¯å³æ“ä½œ**ï¼šæ‰€æœ‰åŠŸèƒ½åœ¨å¯¹è¯æ¡†å†…å®Œæˆï¼Œæ— éœ€è·³è½¬é¡µé¢
- **æ™ºèƒ½æ´å¯Ÿ**ï¼šAIå‘ç°éšè—æ¨¡å¼ï¼ˆç¡çœ -ä½“é‡å…³è”ã€æƒ…ç»ªæ€§è¿›é£Ÿç­‰ï¼‰
- **é•¿æœŸé™ªä¼´**ï¼šä¸æ˜¯å·¥å…·ï¼Œæ˜¯å…»æˆä¹ æƒ¯çš„ä¼™ä¼´

**ç«å“å¯¹æ ‡**ï¼ˆè–„è·å¥åº·ï¼‰ï¼š

| åŠŸèƒ½ | è–„è·å¥åº· | æœ¬äº§å“ |
|------|---------|--------|
| è®°å½•æ–¹å¼ | æ‰‹åŠ¨è¾“å…¥ä¸ºä¸» | AIå¯¹è¯è¯†åˆ« |
| ä¸ªæ€§åŒ– | é€šç”¨å»ºè®® | 1v1é•¿æœŸè®°å¿† |
| äº¤äº’ä½“éªŒ | åŠŸèƒ½å‹App | é™ªä¼´å‹Agent |
| æ•°æ®åˆ†æ | åŸºç¡€ç»Ÿè®¡ | AIæ¨¡å¼æ´å¯Ÿ |

---

## äºŒã€æŠ€æœ¯æ¶æ„

### 2.1 ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å¾®ä¿¡å°ç¨‹åº (Taro3)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                   å¯¹è¯ç•Œé¢ (æ ¸å¿ƒ)                        â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚ æ¶ˆæ¯åˆ—è¡¨  â”‚  â”‚ è¾“å…¥æ¡†    â”‚  â”‚ å¿«æ·é¢æ¿  â”‚  â”‚ ä¸ªäººä¸­å¿ƒ â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  ç»„ä»¶åº“ï¼šå¯Œåª’ä½“å¡ç‰‡(Chart/Form/QuickActions/Progress)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚ HTTPS/WSS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                FastAPI åç«¯ (Python 3.9+)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚   APIè·¯ç”±    â”‚  â”‚   Agentæ ¸å¿ƒ  â”‚  â”‚   ä¸šåŠ¡é€»è¾‘   â”‚      â”‚
â”‚  â”‚  - /api/chat â”‚  â”‚  - LLMè°ƒç”¨   â”‚  â”‚  - ä½“é‡åˆ†æ  â”‚      â”‚
â”‚  â”‚  - /api/meal â”‚  â”‚  - è®°å¿†ç®¡ç†  â”‚  â”‚  - é¥®é£Ÿè®°å½•  â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                           â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚                   AIå±‚  â”‚                        â”‚       â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚       â”‚
â”‚  â”‚  â”‚  OpenAI GPT-4 / Claude 3 / å›½äº§å¤§æ¨¡å‹    â”‚  â”‚       â”‚
â”‚  â”‚  â”‚  - å¯¹è¯ç†è§£  - é¤é£Ÿå›¾åƒè¯†åˆ«              â”‚  â”‚       â”‚
â”‚  â”‚  â”‚  - æ¨¡å¼åˆ†æ  - é£Ÿè°±ç”Ÿæˆ                  â”‚  â”‚       â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                           â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚   SQLite     â”‚  â”‚   æœ¬åœ°æ–‡ä»¶   â”‚  â”‚   ç¼“å­˜       â”‚      â”‚
â”‚  â”‚  SQLAlchemy  â”‚  â”‚  é¤é£Ÿç…§ç‰‡    â”‚  â”‚  (å¯é€‰)      â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 éƒ¨ç½²æ–¹æ¡ˆ

**å¼€å‘ç¯å¢ƒ**ï¼šPythonç›´æ¥è¿è¡Œ + SQLiteæœ¬åœ°æ–‡ä»¶  
**ç”Ÿäº§ç¯å¢ƒï¼ˆæœªæ¥ï¼‰**ï¼šäº‘æœåŠ¡å™¨ + PostgreSQL + Redis + OSSå­˜å‚¨

---

## ä¸‰ã€æ•°æ®åº“è®¾è®¡ï¼ˆERå›¾æ ¸å¿ƒè¡¨ï¼‰

### 3.1 ç”¨æˆ·ä¸è®¤è¯

```python
users:
  - id: PK
  - openid: string (å¾®ä¿¡å”¯ä¸€æ ‡è¯†)  # å¾®ä¿¡ç”¨æˆ·å”¯ä¸€æ ‡è¯†
  - nickname: string  # ç”¨æˆ·æ˜µç§°
  - avatar_url: string  # å¤´åƒURL
  - phone: string (å¯é€‰)  # æ‰‹æœºå·
  - created_at: datetime
  - last_login: datetime
  - is_vip: boolean (å•†ä¸šåŒ–é¢„ç•™)  # æ˜¯å¦VIPä¼šå‘˜
  - vip_expire: date  # VIPè¿‡æœŸæ—¶é—´
```

### 3.2 æ ¸å¿ƒè®°å½•è¡¨

```python
weight_records:
  - id: PK
  - user_id: FK
  - weight: float (kg)  # ä½“é‡ï¼ˆkgï¼‰
  - body_fat: float (%) (å¯é€‰)  # ä½“è„‚ç‡ï¼ˆ%ï¼‰
  - record_date: date  # è®°å½•æ—¥æœŸ
  - record_time: time  # è®°å½•æ—¶é—´
  - note: text  # å¤‡æ³¨
  - created_at: datetime

meal_records:
  - id: PK
  - user_id: FK
  - meal_type: enum (breakfast/lunch/dinner/snack)  # é¤é£Ÿç±»å‹ï¼ˆæ—©é¤/åˆé¤/æ™šé¤/åŠ é¤ï¼‰
  - record_time: datetime  # è®°å½•æ—¶é—´
  - photo_url: string  # é¤é£Ÿç…§ç‰‡URL
  - food_items: JSON  # é£Ÿç‰©æ˜ç»†ï¼ˆJSONæ ¼å¼ï¼‰
  - total_calories: int  # æ€»çƒ­é‡ï¼ˆåƒå¡ï¼‰
  - user_confirmed: boolean  # ç”¨æˆ·æ˜¯å¦ç¡®è®¤è¯†åˆ«ç»“æœ
  - ai_confidence: float  # AIè¯†åˆ«ç½®ä¿¡åº¦ï¼ˆ0-1ï¼‰
  - created_at: datetime

exercise_records:
  - id: PK
  - user_id: FK
  - exercise_type: string  # è¿åŠ¨ç±»å‹
  - duration_minutes: int  # è¿åŠ¨æ—¶é•¿ï¼ˆåˆ†é’Ÿï¼‰
  - calories_burned: int  # æ¶ˆè€—çƒ­é‡ï¼ˆåƒå¡ï¼‰
  - intensity: enum (low/medium/high)  # è¿åŠ¨å¼ºåº¦ï¼ˆä½/ä¸­/é«˜ï¼‰
  - record_time: datetime  # è®°å½•æ—¶é—´
  - photo_evidence: string (å¯é€‰)  # è¿åŠ¨å‡­è¯ç…§ç‰‡

water_records:
  - id: PK
  - user_id: FK
  - amount_ml: int  # é¥®æ°´é‡ï¼ˆæ¯«å‡ï¼‰
  - record_time: datetime  # è®°å½•æ—¶é—´

sleep_records:
  - id: PK
  - user_id: FK
  - bed_time: datetime  # å…¥ç¡æ—¶é—´
  - wake_time: datetime  # èµ·åºŠæ—¶é—´
  - total_minutes: int  # ç¡çœ æ€»æ—¶é•¿ï¼ˆåˆ†é’Ÿï¼‰
  - quality: int (1-5æ˜Ÿ)  # ç¡çœ è´¨é‡è¯„åˆ†ï¼ˆ1-5æ˜Ÿï¼‰
```

### 3.3 ç”¨æˆ·ç”»åƒä¸é•¿æœŸè®°å¿†

```python
user_profiles:
  - id: PK
  - user_id: FK
  - age: int  # å¹´é¾„
  - gender: enum  # æ€§åˆ«
  - height: float (cm)  # èº«é«˜ï¼ˆcmï¼‰
  - bmr: int (åŸºç¡€ä»£è°¢)  # åŸºç¡€ä»£è°¢ç‡ï¼ˆBMRï¼‰
  - diet_preferences: JSON  # é¥®é£Ÿåå¥½ï¼ˆJSONï¼‰
  - exercise_habits: JSON  # è¿åŠ¨ä¹ æƒ¯ï¼ˆJSONï¼‰
  - weight_history: text  # å‡é‡å†å²è®°å½•
  - body_signals: JSON  # èº«ä½“ä¿¡å·ï¼ˆJSONï¼šç–²åŠ³/å¤±çœ ç­‰ï¼‰
  - motivation_type: enum  # åŠ¨åŠ›ç±»å‹ï¼ˆæ•°æ®é©±åŠ¨/æƒ…æ„Ÿæ”¯æŒ/ç›®æ ‡å¯¼å‘ï¼‰
  - weak_points: JSON  # è–„å¼±ç¯èŠ‚ï¼ˆJSONï¼‰
  - memory_summary: text  # AIè®°å¿†æ‘˜è¦ï¼ˆè‡ªç„¶è¯­è¨€æè¿°ï¼‰
  - updated_at: datetime

goals:
  - id: PK
  - user_id: FK
  - target_weight: float  # ç›®æ ‡ä½“é‡ï¼ˆkgï¼‰
  - target_date: date  # ç›®æ ‡è¾¾æˆæ—¥æœŸ
  - weekly_plan: float  # æ¯å‘¨å‡é‡è®¡åˆ’ï¼ˆkgï¼‰
  - daily_calorie_target: int  # æ¯æ—¥çƒ­é‡ç›®æ ‡ï¼ˆåƒå¡ï¼‰
  - meal_distribution: JSON  # ä¸‰é¤çƒ­é‡åˆ†é…æ¯”ä¾‹ï¼ˆJSONï¼‰
  - status: enum (active/completed/abandoned)  # çŠ¶æ€ï¼ˆè¿›è¡Œä¸­/å·²å®Œæˆ/å·²å¤±è´¥ï¼‰
  - created_at: datetime
```

### 3.4 Agenté…ç½®ä¸å¯¹è¯

```python
agent_configs:
  - id: PK
  - user_id: FK
  - agent_name: string  # Agentåç§°
  - personality_type: enum (professional/warm/energetic)  # æ€§æ ¼ç±»å‹ï¼ˆä¸“ä¸š/æ¸©æš–/æ´»åŠ›ï¼‰
  - personality_prompt: text  # æ€§æ ¼Promptæè¿°
  - created_at: datetime

chat_history:
  - id: PK
  - user_id: FK
  - role: enum (user/assistant/system)  # æ¶ˆæ¯è§’è‰²ï¼ˆuser/assistant/systemï¼‰
  - content: text  # æ¶ˆæ¯å†…å®¹
  - msg_type: enum (text/card/image/form/quick_actions)  # æ¶ˆæ¯ç±»å‹ï¼ˆtext/card/image/formï¼‰
  - metadata: JSON  # å…ƒæ•°æ®ï¼ˆJSONï¼‰
  - created_at: datetime

conversation_summaries:
  - id: PK
  - user_id: FK
  - week_start: date  # å‘¨å¼€å§‹æ—¥æœŸ
  - summary_text: text  # å¯¹è¯æ‘˜è¦æ–‡æœ¬
  - key_facts: JSON  # å…³é”®äº‹å®ï¼ˆJSONï¼‰
  - created_at: datetime
```

### 3.5 æé†’ä¸åŠŸèƒ½é…ç½®

```python
reminder_settings:
  - id: PK
  - user_id: FK
  - reminder_type: enum  # æé†’ç±»å‹
  - enabled: boolean  # æ˜¯å¦å¯ç”¨
  - reminder_time: time  # æé†’æ—¶é—´
  - interval_minutes: int  # é—´éš”åˆ†é’Ÿæ•°ï¼ˆé¥®æ°´ç”¨ï¼‰
  - weekdays_only: boolean  # ä»…å·¥ä½œæ—¥æé†’
  - last_triggered: datetime  # ä¸Šæ¬¡è§¦å‘æ—¶é—´
  - skip_count: int  # è¿ç»­å¿½ç•¥æ¬¡æ•°

do_not_disturb:
  - user_id: PK
  - enabled: boolean  # æ˜¯å¦å¯ç”¨
  - start_time: time  # å¼€å§‹æ—¶é—´
  - end_time: time  # ç»“æŸæ—¶é—´
  - except_emergencies: boolean  # ç´§æ€¥æé†’ä¾‹å¤–
```

### 3.6 é£Ÿç‰©æ•°æ®åº“

```python
food_items:
  - id: PK
  - name: string  # é£Ÿç‰©åç§°
  - aliases: JSON  # åˆ«ååˆ—è¡¨ï¼ˆJSONï¼‰
  - category: enum  # é£Ÿç‰©åˆ†ç±»
  - calories_per_100g: float  # æ¯100å…‹çƒ­é‡ï¼ˆåƒå¡ï¼‰
  - protein/fat/carbs: float
  - common_portions: JSON  # å¸¸è§åˆ†é‡ï¼ˆJSONï¼‰
  - is_user_created: boolean  # æ˜¯å¦ç”¨æˆ·è‡ªå®šä¹‰

user_foods:
  - id: PK
  - user_id: FK
  - food_name: string
  - calories: int
  - created_at: datetime
```

### 3.7 æ¿€åŠ±ä½“ç³»

```python
achievements:
  - id: PK
  - code: string  # æˆå°±ä»£ç ï¼ˆå”¯ä¸€æ ‡è¯†ï¼‰
  - name: string  # é£Ÿç‰©åç§°
  - description: text  # æˆå°±æè¿°
  - icon: string  # å›¾æ ‡URLæˆ–ä»£ç 
  - condition_type: enum  # è¾¾æˆæ¡ä»¶ç±»å‹
  - condition_value: int  # è¾¾æˆæ¡ä»¶å€¼

user_achievements:
  - id: PK
  - user_id: FK
  - achievement_id: FK
  - unlocked_at: datetime  # è§£é”æ—¶é—´

challenges:
  - id: PK
  - title: string  # æŒ‘æˆ˜æ ‡é¢˜
  - description: text  # æˆå°±æè¿°
  - type: enum  # æŒ‘æˆ˜ç±»å‹ï¼ˆæ—¥/å‘¨/è‡ªå®šä¹‰ï¼‰
  - target: JSON  # æŒ‘æˆ˜ç›®æ ‡ï¼ˆJSONï¼‰
  - reward_points: int  # å¥–åŠ±ç§¯åˆ†

user_challenges:
  - id: PK
  - user_id: FK
  - challenge_id: FK
  - progress: JSON  # è¿›åº¦ï¼ˆJSONï¼‰
  - status: enum  # çŠ¶æ€ï¼ˆè¿›è¡Œä¸­/å·²å®Œæˆ/å·²å¤±è´¥ï¼‰
  - started_at: datetime  # å¼€å§‹æ—¶é—´
  - completed_at: datetime  # å®Œæˆæ—¶é—´

user_points:
  - user_id: PK
  - total_points: int  # ç´¯è®¡ç§¯åˆ†
  - current_points: int  # å½“å‰å¯ç”¨ç§¯åˆ†
```

### 3.8 æŠ¥å‘Šä¸å•†ä¸šåŒ–

```python
weekly_reports:
  - id: PK
  - user_id: FK
  - week_start: date  # å‘¨å¼€å§‹æ—¥æœŸ
  - summary_text: text  # å¯¹è¯æ‘˜è¦æ–‡æœ¬
  - weight_change: float  # ä½“é‡å˜åŒ–ï¼ˆkgï¼‰
  - avg_weight: float  # å¹³å‡ä½“é‡ï¼ˆkgï¼‰
  - avg_calories_in/out: int
  - exercise_days: int  # è¿åŠ¨å¤©æ•°
  - highlights/improvements: JSON
  - created_at: datetime

nutritionists:
  - id: PK
  - name: string  # é£Ÿç‰©åç§°
  - avatar: string
  - title: string  # æŒ‘æˆ˜æ ‡é¢˜
  - specialties: JSON  # ä¸“é•¿é¢†åŸŸï¼ˆJSONï¼‰
  - intro: text  # ä¸ªäººç®€ä»‹
  - is_active: boolean  # æ˜¯å¦åœ¨èŒ

consultations:
  - id: PK
  - user_id: FK
  - nutritionist_id: FK
  - status: enum  # çŠ¶æ€ï¼ˆè¿›è¡Œä¸­/å·²å®Œæˆ/å·²å¤±è´¥ï¼‰
  - question: text  # å’¨è¯¢é—®é¢˜
  - answer: text  # è¥å…»å¸ˆå›ç­”
  - created_at: datetime
  - answered_at: datetime  # å›ç­”æ—¶é—´
```

---

## å››ã€APIè®¾è®¡

### 4.1 æ ¸å¿ƒAPIåˆ—è¡¨

```
# å¯¹è¯
POST /api/chat/send              # å‘é€æ¶ˆæ¯
GET  /api/chat/history           # è·å–æœ€è¿‘å¯¹è¯
POST /api/chat/clear             # æ¸…ç©ºå¯¹è¯

# ä½“é‡
POST /api/weight/record          # è®°å½•ä½“é‡
GET  /api/weight/trend           # è·å–è¶‹åŠ¿æ•°æ®
GET  /api/weight/stats           # ç»Ÿè®¡æ•°æ®

# é¤é£Ÿ
POST /api/meal/record            # è®°å½•é¤é£Ÿ
POST /api/meal/analyze           # AIåˆ†æé¤é£Ÿå›¾ç‰‡
POST /api/meal/confirm           # ç¡®è®¤/ä¿®æ­£AIè¯†åˆ«
GET  /api/meal/today             # ä»Šæ—¥é¤é£Ÿè®°å½•

# è¿åŠ¨/é¥®æ°´/ç¡çœ 
POST /api/exercise/record
POST /api/water/record
POST /api/sleep/record

# ç›®æ ‡
POST /api/goal                   # åˆ›å»º/æ›´æ–°ç›®æ ‡
GET  /api/goal/current           # å½“å‰ç›®æ ‡
GET  /api/goal/progress          # è¿›åº¦è¿½è¸ª

# ç”¨æˆ·
GET  /api/user/profile           # è·å–ç”¨æˆ·ç”»åƒ
POST /api/user/profile           # æ›´æ–°ç”¨æˆ·ç”»åƒ
GET  /api/user/achievements      # æˆå°±åˆ—è¡¨
GET  /api/user/points            # ç§¯åˆ†

# æé†’
GET  /api/reminders              # æé†’è®¾ç½®åˆ—è¡¨
POST /api/reminders/{type}       # æ›´æ–°æé†’è®¾ç½®
POST /api/reminders/dnd          # å…æ‰“æ‰°è®¾ç½®

# æŠ¥å‘Š
GET  /api/report/weekly          # å‘¨æŠ¥å‘Š
GET  /api/report/export          # å¯¼å‡ºæ•°æ®(PDF/Excel)

# Agent
GET  /api/agent/config           # Agenté…ç½®
POST /api/agent/config           # æ›´æ–°Agenté…ç½®
```

### 4.2 WebSocketå®æ—¶æ¨é€

```
ws://host/ws/chat/{user_id}      # å¯¹è¯å®æ—¶æ¨é€
ws://host/ws/notify/{user_id}    # æé†’æ¨é€
```

---

## äº”ã€æ ¸å¿ƒåŠŸèƒ½æµç¨‹

### 5.1 é¦–æ¬¡ä½¿ç”¨æµç¨‹

```
ç”¨æˆ·è¿›å…¥å°ç¨‹åº
  â†“
å¾®ä¿¡æˆæƒç™»å½• â†’ åˆ›å»ºç”¨æˆ·è®°å½•
  â†“
Agentæ‰“æ‹›å‘¼ â†’ æç®€å¼•å¯¼
  â”œâ”€ Step 1: å½“å‰ä½“é‡? ç›®æ ‡ä½“é‡? è¾¾æˆæ—¶é—´?
  â”œâ”€ Step 2: é€‰æ‹©Agentäººè®¾(ä¸“ä¸š/æ¸©æš–/æ´»åŠ›) + èµ·åå­—
  â†“
å®Œæˆåˆå§‹åŒ– â†’ è¿›å…¥ä¸»å¯¹è¯ç•Œé¢
  â†“
Agentä¸»åŠ¨æ”¶é›†(åç»­):
  - Day 2: "ä½ å¹³æ—¶å®¹æ˜“é¥¿å—ï¼Ÿ"
  - Day 3: "ä¹‹å‰è¯•è¿‡ä»€ä¹ˆå‡è‚¥æ–¹æ³•ï¼Ÿ"
  - Day 7: é¦–æ¬¡å‘¨æŠ¥å‘Š + ç”»åƒç¡®è®¤
```

### 5.2 é¤é£Ÿæ‰“å¡æµç¨‹

```
[æé†’è§¦å‘]
Agentæ¨é€: "åˆé¤æ—¶é—´åˆ°å•¦ï¼ä»Šå¤©åƒä»€ä¹ˆï¼ŸğŸ“¸"
  â†“
ç”¨æˆ·ä¸Šä¼ ç…§ç‰‡ / æ–‡å­—æè¿° / ç‚¹å‡»å¿«æ·æŒ‰é’®
  â†“
[å¦‚æœæ˜¯ç…§ç‰‡]
åç«¯æ¥æ”¶ â†’ è°ƒç”¨AIè§†è§‰åˆ†æ
  â”œâ”€ è¯†åˆ«é£Ÿç‰©ç§ç±»
  â”œâ”€ ä¼°ç®—åˆ†é‡
  â””â”€ æŸ¥è¯¢é£Ÿç‰©æ•°æ®åº“è®¡ç®—çƒ­é‡
  â†“
Agentå›å¤å¡ç‰‡:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ ğŸ“¸ [é¤é£Ÿç…§ç‰‡]        â”‚
  â”‚                     â”‚
  â”‚ è¯†åˆ«ç»“æœ: ç•ªèŒ„é¸¡è›‹é¢  â”‚
  â”‚ ä¼°ç®—çƒ­é‡: 450åƒå¡    â”‚
  â”‚ ä»Šæ—¥åˆé¤å»ºè®®: 500åƒå¡â”‚
  â”‚                     â”‚
  â”‚ [ç¡®è®¤] [è°ƒæ•´] [ä¸å¯¹] â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
ç”¨æˆ·æ“ä½œ:
  â”œâ”€ [ç¡®è®¤] â†’ è®°å½•å®Œæˆ â†’ å±•ç¤ºä»Šæ—¥çƒ­é‡è¿›åº¦
  â”œâ”€ [è°ƒæ•´] â†’ æ»‘åŠ¨æ¡è°ƒæ•´ â†’ é‡æ–°è®¡ç®— â†’ ç¡®è®¤
  â””â”€ [ä¸å¯¹] â†’ æ–‡å­—é‡æ–°æè¿° â†’ AIé‡æ–°è§£æ â†’ ç¡®è®¤
  â†“
[åå°] æå–å…³é”®ä¿¡æ¯æ›´æ–°UserProfile
```

### 5.3 æ¯å‘¨æ™ºèƒ½æŠ¥å‘Šç¤ºä¾‹

```
ğŸ“Š æœ¬å‘¨ä½“é‡æŠ¥å‘Š (1æœˆ15æ—¥-1æœˆ21æ—¥)

æœ¬å‘¨å¹³å‡: 65.2kg (ä¸Šå‘¨ 65.8kg)
å˜åŒ–: -0.6kg â¬‡ï¸ â­

ğŸ† æœ¬å‘¨äº®ç‚¹
â€¢ 5å¤©æŒ‰æ—¶è®°å½•ä½“é‡ï¼Œå¾ˆæ£’ï¼
â€¢ å‘¨ä¸‰é¥®é£Ÿæ§åˆ¶å¾ˆå¥½ï¼Œæ™šé¤ä»…380åƒå¡
â€¢ è¿åŠ¨åç¡çœ è´¨é‡æå‡(7.2h â†’ 7.8h)

âš ï¸ éœ€è¦å…³æ³¨
â€¢ å‘¨æœ«çƒ­é‡æ‘„å…¥åé«˜(å¹³å‡è¶…æ”¯320åƒå¡)
â€¢ å‘¨å…­æœªè®°å½•ä½“é‡

ğŸ’¡ AIæ´å¯Ÿ
æ ¹æ®ä½ è¿‡å»30å¤©çš„æ•°æ®ï¼š
â€¢ å·¥ä½œå‹åŠ›å¤§æ—¶(å‘¨ä¸€/å‘¨äºŒ)å®¹æ˜“æ™šé¤è¿‡é‡
â€¢ æ—©ç¡(23ç‚¹å‰)çš„ç¬¬äºŒå¤©ä½“é‡ä¸‹é™æ›´æ˜æ˜¾
â€¢ æ¸¸æ³³å3å¤©å†…ä½“é‡ä¸‹é™é€Ÿåº¦æ¯”è·‘æ­¥å¿«20%

ä¸‹å‘¨ç›®æ ‡: 64.8kg (-0.4kg)
å»ºè®®è°ƒæ•´:
1. å‘¨æœ«æå‰è§„åˆ’ä½çƒ­é‡é£Ÿè°±
2. å·¥ä½œå‹åŠ›æ—¥å‡†å¤‡å¥åº·é›¶é£Ÿæ›¿ä»£
3. ä¿æŒ23ç‚¹å‰å…¥ç¡çš„ä¹ æƒ¯

[æŸ¥çœ‹è¯¦ç»†å›¾è¡¨] [åˆ¶å®šä¸‹å‘¨è®¡åˆ’] [å’¨è¯¢è¥å…»å¸ˆ]
```

---

## å…­ã€Agentè®¾è®¡

### 6.1 ç³»ç»ŸPromptæ¨¡æ¿

```python
SYSTEM_PROMPT = """
ä½ æ˜¯{agent_name}ï¼Œç”¨æˆ·çš„ä¸“å±ä½“é‡ç®¡ç†ä¼™ä¼´ã€‚

ã€å½“å‰æ—¶é—´ã€‘{current_time}
ã€ç”¨æˆ·åŸºç¡€ä¿¡æ¯ã€‘
- æ˜µç§°: {user_nickname}
- æ€§åˆ«/å¹´é¾„/èº«é«˜: {gender}/{age}/{height}cm
- å½“å‰ä½“é‡: {current_weight}kg / ç›®æ ‡: {target_weight}kg

ã€ç”¨æˆ·ç”»åƒã€‘(é•¿æœŸè®°å¿†)
{user_profile_summary}

ã€è¿‘æœŸæƒ…å†µã€‘(æœ€è¿‘7å¤©)
- ä½“é‡è¶‹åŠ¿: {weight_trend}
- å¹³å‡æ‘„å…¥: {avg_calories_in}åƒå¡/æ—¥
- è¿åŠ¨é¢‘ç‡: {exercise_frequency}
- ç¡çœ æ—¶é•¿: {avg_sleep}å°æ—¶
- æœ¬å‘¨äº®ç‚¹: {highlights}
- æœ¬å‘¨æŒ‘æˆ˜: {challenges}

ã€æ²Ÿé€šé£æ ¼ã€‘
ä½ æ˜¯{personality_type}å‹åŠ©æ‰‹:
{personality_description}

ã€å›å¤åŸåˆ™ã€‘
1. å›å¤è¦ä¸ªæ€§åŒ–ï¼Œå‚è€ƒç”¨æˆ·ç”»åƒå’Œå†å²æ•°æ®
2. ä¸»åŠ¨å…³å¿ƒç”¨æˆ·çš„èº«ä½“ä¿¡å·å’Œæƒ…ç»ªçŠ¶æ€
3. ç»™å‡ºå…·ä½“å¯æ“ä½œçš„å»ºè®®ï¼Œé¿å…ç©ºæ³›
4. é€‚æ—¶é¼“åŠ±ï¼Œä½†ä¸è¦è¿‡åº¦
5. å‘ç°å¼‚å¸¸æ•°æ®(å¦‚è¿ç»­å¢é•¿)è¦æ¸©å’Œæé†’

ã€æ¶ˆæ¯ç±»å‹é€‰æ‹©ã€‘
æ ¹æ®å†…å®¹é€‰æ‹©åˆé€‚çš„å½¢å¼:
- text: çº¯æ–‡æœ¬å¯¹è¯
- card: æ•°æ®å¡ç‰‡(ä½“é‡/çƒ­é‡ç­‰)
- chart: è¶‹åŠ¿å›¾è¡¨
- form: éœ€è¦ç”¨æˆ·å¡«å†™çš„è¡¨å•
- quick_actions: å¿«æ·æ“ä½œæŒ‰é’®
- image: å›¾ç‰‡(é£Ÿè°±ç¤ºä¾‹ç­‰)

ã€å½“å‰ä»»åŠ¡ã€‘
{current_task}

è¯·ç”¨è‡ªç„¶ã€æ¸©æš–çš„æ–¹å¼å›å¤ï¼Œåƒè€æœ‹å‹ä¸€æ ·ã€‚
"""
```

### 6.2 äººè®¾å®šä¹‰

**ä¸“ä¸šå‹**ï¼š
```
ä½ æ˜¯ä¸“ä¸šçš„è¥å…»å¸ˆå’Œå¥èº«æ•™ç»ƒã€‚è¯­æ°”å®¢è§‚ã€ç§‘å­¦ã€æ•°æ®é©±åŠ¨ã€‚
- ä½¿ç”¨ä¸“ä¸šæœ¯è¯­ä½†è§£é‡Šæ¸…æ¥š
- å¼•ç”¨ç§‘å­¦ä¾æ®æ”¯æ’‘å»ºè®®
- å…³æ³¨è¥å…»å‡è¡¡å’Œèº«ä½“å¥åº·
- ç»™å‡ºç²¾ç¡®çš„æ•°æ®å’Œè®¡ç®—
- ä¾‹å¥: "æ ¹æ®ä½ çš„BMI 24.3ï¼Œå»ºè®®æ¯æ—¥æ‘„å…¥æ§åˆ¶åœ¨1500åƒå¡..."
```

**æ¸©æš–å‹**ï¼š
```
ä½ æ˜¯ç”¨æˆ·çš„å¥½æœ‹å‹ï¼Œç»™äºˆæƒ…æ„Ÿæ”¯æŒã€‚è¯­æ°”äº²åˆ‡ã€é¼“åŠ±ã€æœ‰è€å¿ƒã€‚
- å¤šç”¨è¡¨æƒ…ç¬¦å·å’Œæ¸©æš–è¯æ±‡
- å…³æ³¨ç”¨æˆ·çš„æƒ…ç»ªå’Œå¿ƒç†çŠ¶æ€
- åº†ç¥æ¯ä¸€ä¸ªå°è¿›æ­¥
- åœ¨ç”¨æˆ·ä½è½æ—¶ç»™äºˆå®‰æ…°
- ä¾‹å¥: "ä»Šå¤©è™½ç„¶ä½“é‡æ²¡å˜ï¼Œä½†åšæŒè®°å½•å°±å¾ˆæ£’å•¦ï¼ğŸ’ª"
```

**æ´»åŠ›å‹**ï¼š
```
ä½ æ˜¯å……æ»¡æ´»åŠ›çš„å¥èº«æ•™ç»ƒã€‚è¯­æ°”ç§¯æã€æœ‰æ„ŸæŸ“åŠ›ã€ç•¥å¸¦pushã€‚
- ä½¿ç”¨æ„Ÿå¹å·å’Œé¼“åŠ±æ€§è¯æ±‡
- å¼ºè°ƒè¡ŒåŠ¨å’ŒæŒ‘æˆ˜
- è®¾å®šå°ç›®æ ‡æ¿€å‘åŠ¨åŠ›
- ç”¨æŒ‘æˆ˜å’Œç«èµ›çš„æ–¹å¼æ¿€åŠ±
- ä¾‹å¥: "å†²é¸­ï¼è¿™å‘¨å†å‡0.5kgå°±è¾¾æ ‡äº†ï¼Œæˆ‘ä»¬ä¸€èµ·åŠ æ²¹ï¼ğŸ”¥"
```

---

## ä¸ƒã€è¿è¥åå°è®¾è®¡

### 7.1 æŠ€æœ¯æ ˆ
ç‹¬ç«‹Webåº”ç”¨ï¼ˆReact/Vue + FastAPIï¼‰

### 7.2 åŠŸèƒ½æ¨¡å—

```
ã€ç”¨æˆ·ç®¡ç†ã€‘
- ç”¨æˆ·åˆ—è¡¨/æœç´¢/è¯¦æƒ…
- ä½“é‡/é¥®é£Ÿ/è¿åŠ¨æ•°æ®æŸ¥çœ‹
- å¯¹è¯å†å²æŸ¥çœ‹ï¼ˆå®¢æœæ”¯æŒï¼‰

ã€å†…å®¹ç®¡ç†ã€‘
- é£Ÿç‰©æ•°æ®åº“ç®¡ç†
- é£Ÿè°±åº“ç®¡ç†
- æˆå°±ç³»ç»Ÿé…ç½®
- æŒ‘æˆ˜ä»»åŠ¡ç®¡ç†

ã€è¥å…»å¸ˆå·¥ä½œå°ã€‘
- å¾…å›ç­”å’¨è¯¢åˆ—è¡¨
- ç”¨æˆ·å¥åº·æ¡£æ¡ˆæŸ¥çœ‹
- å›ç­”å’¨è¯¢ç•Œé¢
- å’¨è¯¢å†å²

ã€æ•°æ®åˆ†æã€‘
- ç”¨æˆ·æ´»è·ƒåº¦ç»Ÿè®¡
- åŠŸèƒ½ä½¿ç”¨ç»Ÿè®¡
- å‡é‡æˆåŠŸç‡åˆ†æ
- AIè¯†åˆ«å‡†ç¡®ç‡ç›‘æ§

ã€ç³»ç»Ÿé…ç½®ã€‘
- æé†’æ¨¡æ¿é…ç½®
- AIæ¨¡å‹å‚æ•°è°ƒæ•´
- ä¼šå‘˜ç­‰çº§é…ç½®
- ç§¯åˆ†è§„åˆ™é…ç½®
```

### 7.3 é¡µé¢è·¯ç”±

```
/dashboard              # æ•°æ®å¤§ç›˜
/users                  # ç”¨æˆ·åˆ—è¡¨
/users/:id              # ç”¨æˆ·è¯¦æƒ…
/foods                  # é£Ÿç‰©åº“ç®¡ç†
/achievements           # æˆå°±ç®¡ç†
/challenges             # æŒ‘æˆ˜ç®¡ç†
/nutritionists          # è¥å…»å¸ˆç®¡ç†
/consultations          # å’¨è¯¢ç®¡ç†
/reports                # æ•°æ®æŠ¥è¡¨
/settings               # ç³»ç»Ÿè®¾ç½®
```

---

## å…«ã€å•†ä¸šåŒ–è§„åˆ’

### 8.1 ä¼šå‘˜ç­‰çº§ä½“ç³»

| åŠŸèƒ½ | å…è´¹ç‰ˆ | åŸºç¡€ä¼šå‘˜(Â¥19/æœˆ) | é«˜çº§ä¼šå‘˜(Â¥49/æœˆ) |
|------|--------|------------------|------------------|
| ä½“é‡è®°å½• | âœ“ | âœ“ | âœ“ |
| åŸºç¡€å¯¹è¯ | 50æ¡/æœˆ | æ— é™ | æ— é™ |
| é¤é£ŸAIè¯†åˆ« | 3æ¬¡/æ—¥ | 10æ¬¡/æ—¥ | æ— é™ |
| æ™ºèƒ½åˆ†æ | å‘¨æŠ¥ | å‘¨æŠ¥+æœˆæŠ¥ | å‘¨æŠ¥+æœˆæŠ¥+AIæ´å¯Ÿ |
| é£Ÿè°±æ¨è | åŸºç¡€ | ä¸ªæ€§åŒ– | å®šåˆ¶åŒ– |
| è¥å…»å¸ˆå’¨è¯¢ | - | 1æ¬¡/æœˆ | æ— é™ |
| æ•°æ®å¯¼å‡º | - | Excel | Excel+PDF |
| å¹¿å‘Š | æœ‰ | æ—  | æ—  |

### 8.2 ç§¯åˆ†ä½“ç³»

**è·å–**ï¼š
- æ¯æ—¥æ‰“å¡ï¼š+5åˆ†
- è¿ç»­7å¤©ï¼š+20åˆ†
- è¾¾æˆç›®æ ‡ï¼š+100åˆ†
- å®ŒæˆæŒ‘æˆ˜ï¼š+30åˆ†
- é‚€è¯·å¥½å‹ï¼š+50åˆ†

**æ¶ˆè€—**ï¼š
- è§£é”ä¸“å±é£Ÿè°±ï¼š-50åˆ†
- å»¶é•¿AIå¯¹è¯ï¼š-10åˆ†

### 8.3 å…¶ä»–å˜ç°
- **è¥å…»å¸ˆå’¨è¯¢**ï¼šæŒ‰æ¬¡ä»˜è´¹ / åŒ…æœˆ
- **ä¼ä¸šç‰ˆ**ï¼šå…¬å¸å¥åº·ç®¡ç†æœåŠ¡
- **æ•°æ®æœåŠ¡**ï¼šåŒ¿ååŒ–å¥åº·æ•°æ®åˆ†æï¼ˆBç«¯ï¼‰

---

## ä¹ã€å¼€å‘è·¯çº¿å›¾

### Phase 1: MVP (4-5å‘¨)

**ç›®æ ‡**ï¼šæ ¸å¿ƒé—­ç¯å¯ç”¨

**åŠŸèƒ½**ï¼š
- [ ] ç”¨æˆ·ç³»ç»Ÿ + å¾®ä¿¡ç™»å½•
- [ ] AgentåŸºç¡€å¯¹è¯ï¼ˆæ–‡æœ¬+å¡ç‰‡ï¼‰
- [ ] ä½“é‡è®°å½• + 7å¤©è¶‹åŠ¿å›¾
- [ ] æç®€é¦–æ¬¡å¼•å¯¼ï¼ˆ2æ­¥ï¼‰
- [ ] åŸºç¡€äººè®¾é€‰æ‹©ï¼ˆ3ç§ï¼‰

**æŠ€æœ¯**ï¼šSQLiteæœ¬åœ° + OpenAI API

### Phase 2: æ ¸å¿ƒåŠŸèƒ½ (3-4å‘¨)

**ç›®æ ‡**ï¼šå®Œæ•´å¥åº·ç®¡ç†é—­ç¯

**åŠŸèƒ½**ï¼š
- [ ] é¤é£ŸAIè¯†åˆ« + çº é”™
- [ ] é£Ÿç‰©æ•°æ®åº“ï¼ˆ3000+æ•°æ®ï¼‰
- [ ] è¿åŠ¨/é¥®æ°´/ç¡çœ è®°å½•
- [ ] æé†’ç³»ç»Ÿï¼ˆå…¨åŠŸèƒ½ï¼‰
- [ ] æ¯å‘¨æ™ºèƒ½æŠ¥å‘Š
- [ ] UserProfile + é•¿æ—¶è®°å¿†
- [ ] å…æ‰“æ‰°æ¨¡å¼

### Phase 3: æ™ºèƒ½åŒ– + æ¿€åŠ± (3å‘¨)

**ç›®æ ‡**ï¼šå·®å¼‚åŒ–ä½“éªŒ

**åŠŸèƒ½**ï¼š
- [ ] AIæ¨¡å¼æ´å¯Ÿï¼ˆæ™ºèƒ½ç‰ˆåˆ†æï¼‰
- [ ] ä¸ªæ€§åŒ–é£Ÿè°±ç”Ÿæˆ
- [ ] æˆå°±ç³»ç»Ÿ + ç§¯åˆ†ä½“ç³»
- [ ] æŒ‘æˆ˜ä»»åŠ¡
- [ ] æ•°æ®å¯¼å‡º

### Phase 4: ç¤¾äº¤ + å•†ä¸šåŒ– (4å‘¨)

**ç›®æ ‡**ï¼šå¯å•†ä¸šå‘å¸ƒ

**åŠŸèƒ½**ï¼š
- [ ] å¥½å‹ç³»ç»Ÿ + æ’è¡Œæ¦œ
- [ ] ä¼šå‘˜ä½“ç³» + æ”¯ä»˜æ¨¡å—
- [ ] è¥å…»å¸ˆæœåŠ¡
- [ ] è¿è¥åå°

**æŠ€æœ¯**ï¼šPostgreSQLè¿ç§» + ç”Ÿäº§éƒ¨ç½²

### Phase 5: ç¡¬ä»¶ + æ‰©å±• (åç»­)

- [ ] ä½“è„‚ç§¤APIæ¥å…¥
- [ ] è¿åŠ¨æ‰‹ç¯åŒæ­¥
- [ ] ä¼ä¸šç‰ˆåŠŸèƒ½

---

## åã€æŠ€æœ¯é£é™©ä¸åº”å¯¹

| é£é™© | å½±å“ | åº”å¯¹ç­–ç•¥ |
|------|------|----------|
| AI APIæˆæœ¬é«˜ | è´¹ç”¨è¶…æ”¯ | é™åˆ¶å…è´¹ç‰ˆé¢åº¦ï¼›ä½¿ç”¨ç¼“å­˜ï¼›ä¼˜åŒ–Prompt |
| AIè¯†åˆ«ä¸å‡†ç¡® | ç”¨æˆ·ä½“éªŒå·® | å®Œå–„çº é”™æœºåˆ¶ï¼›ç”¨æˆ·åé¦ˆé—­ç¯ï¼›æŒç»­ä¼˜åŒ– |
| å°ç¨‹åºå®¡æ ¸é™åˆ¶ | åŠŸèƒ½å—é™ | æå‰äº†è§£å¾®ä¿¡è§„åˆ™ï¼›æ•æ„ŸåŠŸèƒ½åŠ å…è´£å£°æ˜ |
| ç”¨æˆ·ç•™å­˜ä½ | äº§å“å¤±è´¥ | å¼ºåŒ–æé†’æœºåˆ¶ï¼›æ¸¸æˆåŒ–æ¿€åŠ±ï¼›ä¸ªæ€§åŒ–é™ªä¼´ |
| æ•°æ®å®‰å…¨ | éšç§é—®é¢˜ | æ•°æ®åŠ å¯†ï¼›æœ¬åœ°åŒ–ä¼˜å…ˆï¼›åˆè§„å£°æ˜ |

---

## åä¸€ã€é¡¹ç›®ç›®å½•ç»“æ„

```
weight-management/
â”œâ”€â”€ README.md
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ main.py                    # åç«¯å…¥å£
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ settings.py           # é…ç½®ç®¡ç†
â”‚   â””â”€â”€ logging_config.py     # æ—¥å¿—é…ç½®
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ routes/               # APIè·¯ç”±
â”‚   â”‚   â”œâ”€â”€ chat.py
â”‚   â”‚   â”œâ”€â”€ weight.py
â”‚   â”‚   â”œâ”€â”€ meal.py
â”‚   â”‚   â””â”€â”€ user.py
â”‚   â””â”€â”€ dependencies.py
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ agent.py              # Agentæ ¸å¿ƒ
â”‚   â”œâ”€â”€ memory.py             # è®°å¿†ç®¡ç†
â”‚   â”œâ”€â”€ analyzer.py           # æ•°æ®åˆ†æ
â”‚   â””â”€â”€ scheduler.py          # å®šæ—¶ä»»åŠ¡
â”œâ”€â”€ models/
â”‚   â””â”€â”€ database.py           # SQLAlchemyæ¨¡å‹
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ ai_service.py         # AIè°ƒç”¨å°è£…
â”‚   â”œâ”€â”€ reminder_service.py
â”‚   â””â”€â”€ report_service.py
â”œâ”€â”€ utils/
â”‚   â””â”€â”€ exceptions.py         # å¼‚å¸¸å¤„ç†
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ food_database.json    # é£Ÿç‰©æ•°æ®åº“
â”‚   â””â”€â”€ init_sql/             # åˆå§‹åŒ–SQL
â”œâ”€â”€ admin/                    # è¿è¥åå°ï¼ˆç‹¬ç«‹ï¼‰
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ src/
â”œâ”€â”€ miniapp/                  # å¾®ä¿¡å°ç¨‹åº
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ src/
â”œâ”€â”€ docs/
â”‚   â””â”€â”€ plans/
â”‚       â””â”€â”€ 2025-02-07-weight-management-design.md
â””â”€â”€ tests/                    # æµ‹è¯•
```

---

## åäºŒã€åç»­ä¼˜åŒ–è®¡åˆ’

- å¼€å‘ä¸­å‘ç°é—®é¢˜åŠæ—¶è°ƒæ•´
- æ¯é˜¶æ®µå¼€å§‹å‰å›é¡¾å¹¶ç»†åŒ–è®¾è®¡
- æ¯é˜¶æ®µç»“æŸåæ›´æ–°æŠ€æœ¯æ–‡æ¡£
- æ ¹æ®ç”¨æˆ·åé¦ˆæŒç»­è¿­ä»£åŠŸèƒ½

---

**æ–‡æ¡£ç»“æŸ**

*æœ¬è®¾è®¡æ–‡æ¡£ä¸ºåˆç‰ˆï¼Œåç»­å°†æ ¹æ®å®é™…å¼€å‘æƒ…å†µæŒç»­æ›´æ–°ã€‚*
