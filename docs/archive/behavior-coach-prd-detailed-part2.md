# AIè¡Œä¸ºæ•™ç»ƒç³»ç»Ÿ - PRDç»†åŒ–æ–‡æ¡£ï¼ˆç¬¬äºŒéƒ¨åˆ†ï¼‰

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0  
**åˆ›å»ºæ—¥æœŸ**: 2026-02-17  
**å…³è”æ–‡æ¡£**: [ç¬¬ä¸€éƒ¨åˆ†](behavior-coach-prd-detailed-part1.md)

## ä¸‰ã€å¯¹è¯å¼è¡Œä¸ºæ•™ç»ƒç»†åŒ–

### 3.1 ç”¨æˆ·è§†è§’ç»†åŒ–ï¼ˆç”¨æˆ·ä½“éªŒè®¾è®¡å¸ˆï¼‰

**é—®é¢˜**: ç”¨æˆ·å¦‚ä½•ä¸å¯¹è¯å¼æ•™ç»ƒäº’åŠ¨ï¼Ÿ

**ç»†åŒ–å†…å®¹**:

#### **3.1.1 æ•™ç»ƒå¯¹è¯ç±»å‹**
```
1. æ—¥å¸¸æ£€æŸ¥å¯¹è¯
   - æ—¶é—´: æ¯æ—¥å›ºå®šæ—¶é—´
   - å†…å®¹: 
     * ä»Šæ—¥è®¡åˆ’ç¡®è®¤
     * æ˜¨æ—¥å›é¡¾
     * éšœç¢è¯†åˆ«
     * é¼“åŠ±æ”¯æŒ
   - æ—¶é•¿: 3-5åˆ†é’Ÿ

2. è¡Œä¸ºæŒ‡å¯¼å¯¹è¯
   - è§¦å‘: ç”¨æˆ·é‡åˆ°å…·ä½“æŒ‘æˆ˜æ—¶
   - å†…å®¹:
     * æƒ…å¢ƒåˆ†æ
     * å¯é€‰æ–¹æ¡ˆæ¢è®¨
     * å†³ç­–æ”¯æŒ
     * è¡ŒåŠ¨è®¡åˆ’åˆ¶å®š
   - æ—¶é•¿: 5-10åˆ†é’Ÿ

3. åæ€å¯¹è¯
   - è§¦å‘: æ¯å‘¨/é‡Œç¨‹ç¢‘å®Œæˆæ—¶
   - å†…å®¹:
     * è¿›å±•å›é¡¾
     * å­¦ä¹ æ€»ç»“
     * æ¨¡å¼è¯†åˆ«
     * è°ƒæ•´è®¡åˆ’
   - æ—¶é•¿: 10-15åˆ†é’Ÿ

4. åº†ç¥å¯¹è¯
   - è§¦å‘: è¾¾æˆæˆå°±æ—¶
   - å†…å®¹:
     * æˆå°±è®¤å¯
     * æˆåŠŸå› ç´ åˆ†æ
     * æœªæ¥å±•æœ›
     * å¥–åŠ±åº†ç¥
   - æ—¶é•¿: 3-5åˆ†é’Ÿ
```

#### **3.1.2 æ•™ç»ƒå¯¹è¯ç•Œé¢è®¾è®¡**
```
ç•Œé¢ç»„ä»¶è®¾è®¡ï¼š
1. å¯¹è¯ä¸»ç•Œé¢
   - æ•™ç»ƒå¤´åƒå’ŒçŠ¶æ€
   - å¯¹è¯æ°”æ³¡ï¼ˆåŒºåˆ†ç”¨æˆ·/æ•™ç»ƒï¼‰
   - å¯Œåª’ä½“æ”¯æŒï¼ˆå¡ç‰‡ã€å›¾ç‰‡ã€æŒ‰é’®ï¼‰
   - å¿«é€Ÿå›å¤é€‰é¡¹

2. æ•™ç»ƒå·¥å…·é¢æ¿
   - è¡Œä¸ºåˆ†æå·¥å…·
   - ç›®æ ‡è®¾å®šå·¥å…·
   - è®¡åˆ’åˆ¶å®šå·¥å…·
   - åæ€è®°å½•å·¥å…·

3. æƒ…å¢ƒæ„ŸçŸ¥æ˜¾ç¤º
   - å½“å‰å¯¹è¯ç±»å‹æ ‡è¯†
   - å¯¹è¯è¿›åº¦æŒ‡ç¤º
   - å…³é”®ä¿¡æ¯æ‘˜è¦
   - ä¸‹ä¸€æ­¥å»ºè®®

4. éè¯­è¨€åé¦ˆ
   - æ•™ç»ƒè¡¨æƒ…å˜åŒ–
   - å¯¹è¯èŠ‚å¥æŒ‡ç¤º
   - é‡ç‚¹å†…å®¹é«˜äº®
   - æƒ…æ„Ÿæ”¯æŒç¬¦å·
```

#### **3.1.3 å¯¹è¯æµç¨‹ç¤ºä¾‹**
```
ç¤ºä¾‹ï¼šå¤„ç†æ‹–å»¶çš„å¯¹è¯æµç¨‹

ç”¨æˆ·: "æˆ‘ä»Šå¤©åˆæ‹–å»¶äº†è¿åŠ¨ï¼Œæ˜æ˜æœ‰æ—¶é—´å°±æ˜¯ä¸æƒ³åŠ¨"

æ•™ç»ƒ: "æˆ‘ç†è§£è¿™ç§æ„Ÿè§‰ã€‚æ‹–å»¶æ˜¯å¾ˆå¸¸è§çš„æŒ‘æˆ˜ã€‚è®©æˆ‘ä»¬ä¸€èµ·æ¥åˆ†æä¸€ä¸‹ï¼š
1. ä»Šå¤©æ˜¯ä»€ä¹ˆè®©ä½ ç‰¹åˆ«ä¸æƒ³è¿åŠ¨ï¼Ÿ
   - èº«ä½“ç–²åŠ³
   - æƒ…ç»ªä½è½  
   - ç¼ºä¹åŠ¨åŠ›
   - å…¶ä»–åŸå› 

ï¼ˆç”¨æˆ·é€‰æ‹©ï¼šç¼ºä¹åŠ¨åŠ›ï¼‰

æ•™ç»ƒ: "è°¢è°¢åˆ†äº«ã€‚ç¼ºä¹åŠ¨åŠ›æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•ï¼š
ğŸ”˜ é™ä½ç›®æ ‡ï¼šä»Šå¤©åªè¿åŠ¨10åˆ†é’Ÿ
ğŸ”˜ æ”¹å˜å½¢å¼ï¼šæ¢æˆæ•£æ­¥æˆ–æ‹‰ä¼¸
ğŸ”˜ å¯»æ‰¾ä¼™ä¼´ï¼šéœ€è¦æˆ‘é™ªä½ ä¸€èµ·å—ï¼Ÿ
ğŸ”˜ å¥–åŠ±æ‰¿è¯ºï¼šå®Œæˆåç»™è‡ªå·±ä¸€ä¸ªå°å¥–åŠ±

ä½ æ„¿æ„å°è¯•å“ªä¸ªæ–¹æ³•ï¼Ÿ"

ï¼ˆç”¨æˆ·é€‰æ‹©ï¼šé™ä½ç›®æ ‡ï¼‰

æ•™ç»ƒ: "å¾ˆå¥½çš„é€‰æ‹©ï¼é™ä½ç›®æ ‡æ˜¯èªæ˜çš„ç­–ç•¥ã€‚è®©æˆ‘ä»¬è®¾å®šï¼š
ğŸ¯ ä»Šæ—¥ç›®æ ‡ï¼š10åˆ†é’Ÿè½»æ¾è¿åŠ¨
â° æœ€ä½³æ—¶é—´ï¼šæ¥ä¸‹æ¥1å°æ—¶å†…
ğŸ“ å…·ä½“è®¡åˆ’ï¼šåœ¨å®¶åš10åˆ†é’Ÿç‘œä¼½

éœ€è¦æˆ‘ç°åœ¨æé†’ä½ å¼€å§‹å—ï¼Ÿ"
```

### 3.2 è¡Œä¸ºç§‘å­¦è§†è§’ç»†åŒ–ï¼ˆè¡Œä¸ºç§‘å­¦ä¸“å®¶ï¼‰

**é—®é¢˜**: å¦‚ä½•åŸºäºè¡Œä¸ºç§‘å­¦è®¾è®¡æœ‰æ•ˆçš„æ•™ç»ƒå¯¹è¯ï¼Ÿ

**ç»†åŒ–å†…å®¹**:

#### **3.2.1 åŠ¨æœºæ€§è®¿è°ˆæŠ€æœ¯é›†æˆ**
```
OARSæŠ€æœ¯åº”ç”¨ï¼š
1. å¼€æ”¾å¼é—®é¢˜ (Open-ended questions)
   - è®¾è®¡: é¿å…æ˜¯/å¦é—®é¢˜ï¼Œä¿ƒè¿›æ·±åº¦æ€è€ƒ
   - ç¤ºä¾‹: "å…³äºè¿™ä¸ªä¹ æƒ¯ï¼Œä½ æœ€å¤§çš„æŒ‘æˆ˜æ˜¯ä»€ä¹ˆï¼Ÿ"

2. è‚¯å®š (Affirmations)  
   - è®¾è®¡: çœŸè¯šè®¤å¯ç”¨æˆ·çš„åŠªåŠ›å’Œä¼˜åŠ¿
   - ç¤ºä¾‹: "æˆ‘æ³¨æ„åˆ°ä½ å·²ç»åœ¨åšæŒè®°å½•ï¼Œè¿™æ˜¾ç¤ºäº†å¾ˆå¼ºçš„è´£ä»»å¿ƒ"

3. åæ˜ æ€§å€¾å¬ (Reflective listening)
   - è®¾è®¡: å¤è¿°å’Œæ¾„æ¸…ç”¨æˆ·çš„è¯ï¼Œæ˜¾ç¤ºç†è§£
   - ç¤ºä¾‹: "å¬èµ·æ¥ä½ æ‹…å¿ƒæ—¶é—´ä¸å¤Ÿï¼Œä½†åˆå¾ˆæƒ³ä¿æŒè¿ç»­æ€§"

4. æ€»ç»“ (Summaries)
   - è®¾è®¡: é˜¶æ®µæ€§æ€»ç»“ï¼Œå¸®åŠ©ç”¨æˆ·ç†æ¸…æ€è·¯
   - ç¤ºä¾‹: "è®©æˆ‘æ€»ç»“ä¸€ä¸‹ï¼šä½ æƒ³å»ºç«‹æ™¨è·‘ä¹ æƒ¯ï¼Œä½†æ‹…å¿ƒæ—©èµ·å›°éš¾ï¼ŒåŒæ—¶è§‰å¾—éœ€è¦æ›´å¤šåŠ¨åŠ›"
```

#### **3.2.2 è®¤çŸ¥è¡Œä¸ºæŠ€æœ¯åº”ç”¨**
```
CBTæŠ€æœ¯é›†æˆï¼š
1. æ€ç»´è®°å½•
   - åŠŸèƒ½: è®°å½•è‡ªåŠ¨åŒ–è´Ÿé¢æ€ç»´
   - è®¾è®¡: ç®€å•è¡¨æ ¼ï¼Œå¼•å¯¼è¯†åˆ«æ‰­æ›²æ€ç»´

2. æ€ç»´æŒ‘æˆ˜
   - åŠŸèƒ½: æŒ‘æˆ˜ä¸åˆç†ä¿¡å¿µ
   - è®¾è®¡: è‹æ ¼æ‹‰åº•å¼æé—®ï¼Œè¯æ®æ£€éªŒ

3. è¡Œä¸ºå®éªŒ
   - åŠŸèƒ½: é€šè¿‡å®éªŒæµ‹è¯•ä¿¡å¿µ
   - è®¾è®¡: è®¾è®¡å°å®éªŒï¼Œæ”¶é›†è¯æ®

4. æ›¿ä»£æ€ç»´ç”Ÿæˆ
   - åŠŸèƒ½: ç”Ÿæˆæ›´åˆç†çš„æ›¿ä»£æ€ç»´
   - è®¾è®¡: å¤´è„‘é£æš´ï¼Œå¯èƒ½æ€§æ¢ç´¢
```

#### **3.2.3 æ¥å—ä¸æ‰¿è¯ºç–—æ³•å…ƒç´ **
```
ACTæŠ€æœ¯å…ƒç´ ï¼š
1. ä»·å€¼æ¾„æ¸…
   - åŠŸèƒ½: å¸®åŠ©ç”¨æˆ·æ˜ç¡®æ ¸å¿ƒä»·å€¼è§‚
   - è®¾è®¡: ä»·å€¼å¡ç‰‡æ’åºï¼Œä»·å€¼å¯¹è¯

2. è®¤çŸ¥è§£ç¦»
   - åŠŸèƒ½: å¸®åŠ©ç”¨æˆ·ä¸è´Ÿé¢æ€ç»´ä¿æŒè·ç¦»
   - è®¾è®¡: æ€ç»´è§‚å¯Ÿç»ƒä¹ ï¼Œå‘½åæŠ€æœ¯

3. å½“ä¸‹è§‰å¯Ÿ
   - åŠŸèƒ½: åŸ¹å…»å½“ä¸‹è§‰å¯Ÿèƒ½åŠ›
   - è®¾è®¡: ç®€çŸ­æ­£å¿µç»ƒä¹ ï¼Œæ³¨æ„åŠ›è®­ç»ƒ

4. æ‰¿è¯ºè¡ŒåŠ¨
   - åŠŸèƒ½: åŸºäºä»·å€¼çš„è¡ŒåŠ¨æ‰¿è¯º
   - è®¾è®¡: å°æ­¥éª¤æ‰¿è¯ºï¼Œéšœç¢é¢„æµ‹
```

### 3.3 æŠ€æœ¯å®ç°è§†è§’ç»†åŒ–ï¼ˆæŠ€æœ¯è´Ÿè´£äººï¼‰

**é—®é¢˜**: å¦‚ä½•æŠ€æœ¯å®ç°æ™ºèƒ½æ•™ç»ƒå¯¹è¯ï¼Ÿ

**ç»†åŒ–å†…å®¹**:

#### **3.3.1 æ•™ç»ƒå¯¹è¯çŠ¶æ€æœº**
```python
class CoachingDialogueStateMachine:
    """æ•™ç»ƒå¯¹è¯çŠ¶æ€æœº"""
    
    def __init__(self):
        self.states = {
            "greeting": self._handle_greeting,
            "goal_clarification": self._handle_goal_clarification,
            "habit_introduction": self._handle_habit_introduction,
            "behavior_guidance": self._handle_behavior_guidance,
            "problem_solving": self._handle_problem_solving,
            "reflection": self._handle_reflection,
            "celebration": self._handle_celebration,
            "closing": self._handle_closing
        }
        
        self.current_state = "greeting"
        self.context = {}
    
    async def process_message(self, user_message: str, user_context: dict) -> dict:
        """å¤„ç†ç”¨æˆ·æ¶ˆæ¯"""
        # æ›´æ–°ä¸Šä¸‹æ–‡
        self.context.update(user_context)
        self.context["last_user_message"] = user_message
        
        # çŠ¶æ€è½¬æ¢é€»è¾‘
        next_state = self._determine_next_state(user_message)
        
        # æ‰§è¡ŒçŠ¶æ€å¤„ç†
        handler = self.states.get(next_state, self._handle_default)
        response = await handler(user_message)
        
        # æ›´æ–°çŠ¶æ€
        self.current_state = next_state
        
        return {
            "response": response,
            "next_state": next_state,
            "suggested_actions": self._get_suggested_actions(next_state)
        }
    
    def _determine_next_state(self, user_message: str) -> str:
        """ç¡®å®šä¸‹ä¸€ä¸ªçŠ¶æ€"""
        # åŸºäºç”¨æˆ·æ¶ˆæ¯å†…å®¹å’Œå½“å‰çŠ¶æ€å†³å®š
        message_lower = user_message.lower()
        
        if self.current_state == "greeting":
            if any(word in message_lower for word in ["ç›®æ ‡", "æƒ³", "å¸Œæœ›"]):
                return "goal_clarification"
            elif any(word in message_lower for word in ["ä¹ æƒ¯", "å¼€å§‹", "å»ºç«‹"]):
                return "habit_introduction"
        
        # æ›´å¤šçŠ¶æ€è½¬æ¢é€»è¾‘...
        return self.current_state  # é»˜è®¤ä¿æŒå½“å‰çŠ¶æ€
```

#### **3.3.2 æ•™ç»ƒæç¤ºè¯å·¥ç¨‹**
```python
class CoachingPromptEngineer:
    """æ•™ç»ƒæç¤ºè¯å·¥ç¨‹å¸ˆ"""
    
    def generate_coaching_prompt(self, session_type: str, user_context: dict) -> str:
        """ç”Ÿæˆæ•™ç»ƒæç¤ºè¯"""
        
        base_prompt = f"""
ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„è¡Œä¸ºæ•™ç»ƒï¼Œæ­£åœ¨ä¸ç”¨æˆ·è¿›è¡Œ{session_type}ä¼šè¯ã€‚

ç”¨æˆ·èƒŒæ™¯ï¼š
- å§“åï¼š{user_context.get('name', 'ç”¨æˆ·')}
- å½“å‰ç›®æ ‡ï¼š{user_context.get('current_goal', 'æœªè®¾å®š')}
- ä¸»è¦æŒ‘æˆ˜ï¼š{user_context.get('main_challenge', 'æœªè¯†åˆ«')}
- åŠ¨åŠ›ç±»å‹ï¼š{user_context.get('motivation_type', 'æœªè¯†åˆ«')}

æ•™ç»ƒåŸåˆ™ï¼š
1. ä»¥ç”¨æˆ·ä¸ºä¸­å¿ƒï¼šå…³æ³¨ç”¨æˆ·çš„éœ€æ±‚å’Œä»·å€¼è§‚
2. èµ‹èƒ½å¯¼å‘ï¼šå¸®åŠ©ç”¨æˆ·å‘å±•è‡ªæˆ‘ç®¡ç†èƒ½åŠ›
3. è¯æ®ä¸ºåŸºç¡€ï¼šåŸºäºç§‘å­¦çš„è¡Œä¸ºæ”¹å˜ç†è®º
4. æ¸è¿›å¼æ”¹å˜ï¼šæ”¯æŒå°è€Œå¯æŒç»­çš„æ”¹å˜
5. æƒ…å¢ƒæ•æ„Ÿï¼šè€ƒè™‘ç”¨æˆ·çš„ç”Ÿæ´»ç¯å¢ƒå’Œé™åˆ¶

å¯¹è¯é£æ ¼ï¼š
- æ¸©æš–è€Œä¸“ä¸š
- ä½¿ç”¨å¼€æ”¾å¼é—®é¢˜
- ç§¯æå€¾å¬å’Œå…±æƒ…
- å…·ä½“è€Œå¯æ“ä½œçš„å»ºè®®
- é€‚åº¦çš„å¹½é»˜å’Œé¼“åŠ±

å½“å‰ä¼šè¯ç›®æ ‡ï¼š{self._get_session_goal(session_type)}

è¯·æ ¹æ®ä»¥ä¸Šä¿¡æ¯è¿›è¡Œæ•™ç»ƒå¯¹è¯ã€‚
"""
        
        # æ·»åŠ ä¼šè¯ç‰¹å®šæç¤º
        session_specific = self._get_session_specific_prompt(session_type)
        return base_prompt + "\n\n" + session_specific
    
    def _get_session_specific_prompt(self, session_type: str) -> str:
        """è·å–ä¼šè¯ç‰¹å®šæç¤º"""
        prompts = {
            "goal_clarification": """
é‡ç‚¹ï¼šå¸®åŠ©ç”¨æˆ·æ˜ç¡®çœŸå®ã€æœ‰æ„ä¹‰ã€å¯å®ç°çš„ç›®æ ‡
æŠ€å·§ï¼šä½¿ç”¨åŠ¨æœºæ€§è®¿è°ˆï¼Œæ¢ç´¢ç”¨æˆ·çš„ä»·å€¼è§‚å’ŒåŠ¨æœº
é¿å…ï¼šå¼ºåŠ è‡ªå·±çš„ç›®æ ‡ï¼Œå¿½è§†ç”¨æˆ·çš„çœŸå®éœ€æ±‚
            """,
            
            "behavior_guidance": """
é‡ç‚¹ï¼šæä¾›å®æ—¶è¡Œä¸ºæŒ‡å¯¼ï¼Œè§£å†³å…·ä½“æŒ‘æˆ˜
æŠ€å·§ï¼šæƒ…å¢ƒåˆ†æï¼Œæä¾›æ›¿ä»£æ–¹æ¡ˆï¼Œé¼“åŠ±å°è¯•
é¿å…ï¼šè¿‡åº¦æŒ‡å¯¼ï¼Œå¿½è§†ç”¨æˆ·çš„è‡ªä¸»æ€§
            """,
            
            "problem_solving": """
é‡ç‚¹ï¼šå¸®åŠ©ç”¨æˆ·è§£å†³å…·ä½“çš„è¡Œä¸ºéšœç¢
æŠ€å·§ï¼šé—®é¢˜åˆ†æï¼Œæ–¹æ¡ˆç”Ÿæˆï¼Œå†³ç­–æ”¯æŒ
é¿å…ï¼šç›´æ¥ç»™å‡ºç­”æ¡ˆï¼Œå¿½è§†ç”¨æˆ·çš„è§£å†³é—®é¢˜çš„èƒ½åŠ›
            """
        }
        
        return prompts.get(session_type, "")
```

#### **3.3.3 å¯¹è¯è´¨é‡è¯„ä¼°**
```python
class DialogueQualityEvaluator:
    """å¯¹è¯è´¨é‡è¯„ä¼°å™¨"""
    
    def evaluate_coaching_dialogue(self, dialogue_history: List[dict]) -> dict:
        """è¯„ä¼°æ•™ç»ƒå¯¹è¯è´¨é‡"""
        
        evaluation = {
            "engagement_score": self._calculate_engagement_score(dialogue_history),
            "effectiveness_score": self._calculate_effectiveness_score(dialogue_history),
            "empathy_score": self._calculate_empathy_score(dialogue_history),
            "actionability_score": self._calculate_actionability_score(dialogue_history),
            "overall_quality": 0.0
        }
        
        # è®¡ç®—ç»¼åˆè´¨é‡è¯„åˆ†
        weights = {
            "engagement_score": 0.25,
            "effectiveness_score": 0.30,
            "empathy_score": 0.20,
            "actionability_score": 0.25
        }
        
        for key, value in evaluation.items():
            if key != "overall_quality":
                evaluation["overall_quality"] += value * weights.get(key, 0)
        
        # ç”Ÿæˆæ”¹è¿›å»ºè®®
        evaluation["improvement_suggestions"] = self._generate_improvement_suggestions(evaluation)
        
        return evaluation
    
    def _calculate_engagement_score(self, dialogue: List[dict]) -> float:
        """è®¡ç®—å‚ä¸åº¦è¯„åˆ†"""
        # åŸºäºç”¨æˆ·æ¶ˆæ¯é•¿åº¦ã€å“åº”æ—¶é—´ã€äº’åŠ¨é¢‘ç‡ç­‰
        pass
    
    def _generate_improvement_suggestions(self, evaluation: dict) -> List[str]:
        """ç”Ÿæˆæ”¹è¿›å»ºè®®"""
        suggestions = []
        
        if evaluation["empathy_score"] < 0.7:
            suggestions.append("å¢åŠ å…±æƒ…è¡¨è¾¾ï¼Œæ›´å¤šè®¤å¯ç”¨æˆ·çš„æ„Ÿå—")
        
        if evaluation["actionability_score"] < 0.7:
            suggestions.append("æä¾›æ›´å…·ä½“çš„è¡ŒåŠ¨å»ºè®®ï¼Œå‡å°‘æŠ½è±¡æŒ‡å¯¼")
        
        if evaluation["engagement_score"] < 0.7:
            suggestions.append("å¢åŠ å¼€æ”¾å¼é—®é¢˜ï¼Œä¿ƒè¿›ç”¨æˆ·æ·±åº¦å‚ä¸")
        
        return suggestions
```

---

**æ–‡æ¡£ç»§ç»­åœ¨ç¬¬ä¸‰éƒ¨åˆ†...**
