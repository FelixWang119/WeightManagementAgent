<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æŠ¥å‘Šåˆ†äº«æµ‹è¯•é¡µé¢</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            padding: 20px;
            background-color: #f8f9fa;
        }
        .test-section {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .btn-group {
            margin-bottom: 10px;
        }
        .api-result {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            padding: 10px;
            margin-top: 10px;
            font-family: monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
        }
        .report-preview {
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            background: white;
        }
        .share-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        .share-card {
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        .share-card:hover {
            background-color: #f8f9fa;
            transform: translateY(-2px);
        }
        .share-icon {
            font-size: 24px;
            margin-bottom: 10px;
        }
        .download-section {
            margin-top: 20px;
            padding: 15px;
            background: #e9ecef;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="mb-4">æŠ¥å‘Šåˆ†äº«æµ‹è¯•é¡µé¢</h1>
        
        <div class="test-section">
            <h3>1. æŠ¥å‘Šç³»ç»ŸAPIæµ‹è¯•</h3>
            <div class="btn-group">
                <button class="btn btn-primary" onclick="testWeeklyReport()">è·å–å‘¨æŠ¥</button>
                <button class="btn btn-success" onclick="testMonthlyReport()">è·å–æœˆæŠ¥</button>
                <button class="btn btn-info" onclick="testGenerateReport()">ç”Ÿæˆæ–°æŠ¥å‘Š</button>
                <button class="btn btn-warning" onclick="testReportHistory()">è·å–æŠ¥å‘Šå†å²</button>
            </div>
            <div class="row mt-3">
                <div class="col-md-6">
                    <label>ç”¨æˆ·ID:</label>
                    <input type="number" id="userId" class="form-control" value="1" min="1">
                </div>
                <div class="col-md-6">
                    <label>æŠ¥å‘Šç±»å‹:</label>
                    <select id="reportType" class="form-control">
                        <option value="weekly">å‘¨æŠ¥</option>
                        <option value="monthly">æœˆæŠ¥</option>
                    </select>
                </div>
            </div>
            <div id="api-result-1" class="api-result"></div>
        </div>

        <div class="test-section">
            <h3>2. æŠ¥å‘Šåˆ†äº«åŠŸèƒ½æµ‹è¯•</h3>
            <div class="btn-group">
                <button class="btn btn-primary" onclick="testShareAsImage()">åˆ†äº«ä¸ºå›¾ç‰‡</button>
                <button class="btn btn-success" onclick="testShareAsPDF()">åˆ†äº«ä¸ºPDF</button>
                <button class="btn btn-info" onclick="testShareAsText()">åˆ†äº«ä¸ºæ–‡æœ¬</button>
                <button class="btn btn-warning" onclick="testGenerateShareLink()">ç”Ÿæˆåˆ†äº«é“¾æ¥</button>
            </div>
            <div id="api-result-2" class="api-result"></div>
            
            <div class="share-options">
                <div class="share-card" onclick="shareToWeChat()">
                    <div class="share-icon">ğŸ“±</div>
                    <h5>å¾®ä¿¡åˆ†äº«</h5>
                    <p>åˆ†äº«åˆ°å¾®ä¿¡å¥½å‹æˆ–ç¾¤èŠ</p>
                </div>
                <div class="share-card" onclick="shareToQQ()">
                    <div class="share-icon">ğŸ’¬</div>
                    <h5>QQåˆ†äº«</h5>
                    <p>åˆ†äº«åˆ°QQå¥½å‹æˆ–ç©ºé—´</p>
                </div>
                <div class="share-card" onclick="shareToWeibo()">
                    <div class="share-icon">ğŸ¦</div>
                    <h5>å¾®åšåˆ†äº«</h5>
                    <p>åˆ†äº«åˆ°æ–°æµªå¾®åš</p>
                </div>
                <div class="share-card" onclick="copyShareLink()">
                    <div class="share-icon">ğŸ”—</div>
                    <h5>å¤åˆ¶é“¾æ¥</h5>
                    <p>å¤åˆ¶åˆ†äº«é“¾æ¥åˆ°å‰ªè´´æ¿</p>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h3>3. æ•°æ®å¯¼å‡ºåŠŸèƒ½æµ‹è¯•</h3>
            <div class="btn-group">
                <button class="btn btn-primary" onclick="exportAsJSON()">å¯¼å‡ºä¸ºJSON</button>
                <button class="btn btn-success" onclick="exportAsCSV()">å¯¼å‡ºä¸ºCSV</button>
                <button class="btn btn-info" onclick="exportAsExcel()">å¯¼å‡ºä¸ºExcel</button>
                <button class="btn btn-warning" onclick="testBatchExport()">æ‰¹é‡å¯¼å‡º</button>
            </div>
            <div id="api-result-3" class="api-result"></div>
            
            <div class="download-section">
                <h5>å¯¼å‡ºé€‰é¡¹</h5>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="includeCharts" checked>
                    <label class="form-check-label" for="includeCharts">åŒ…å«å›¾è¡¨æ•°æ®</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="includeStats" checked>
                    <label class="form-check-label" for="includeStats">åŒ…å«ç»Ÿè®¡æ•°æ®</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="includeAI" checked>
                    <label class="form-check-label" for="includeAI">åŒ…å«AIåˆ†æ</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="includeRecommendations" checked>
                    <label class="form-check-label" for="includeRecommendations">åŒ…å«å»ºè®®</label>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h3>4. æŠ¥å‘Šé¢„è§ˆ</h3>
            <div class="btn-group">
                <button class="btn btn-primary" onclick="loadReportPreview()">åŠ è½½æŠ¥å‘Šé¢„è§ˆ</button>
                <button class="btn btn-success" onclick="refreshPreview()">åˆ·æ–°é¢„è§ˆ</button>
                <button class="btn btn-info" onclick="printPreview()">æ‰“å°é¢„è§ˆ</button>
            </div>
            <div id="report-preview" class="report-preview">
                <p>ç‚¹å‡»"åŠ è½½æŠ¥å‘Šé¢„è§ˆ"æŒ‰é’®æŸ¥çœ‹æŠ¥å‘Šå†…å®¹...</p>
            </div>
            <div id="api-result-4" class="api-result"></div>
        </div>

        <div class="test-section">
            <h3>5. ç³»ç»ŸçŠ¶æ€</h3>
            <div id="system-status">
                <p>ç­‰å¾…æµ‹è¯•...</p>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        const defaultUserId = 1;
        let currentReportData = null;

        function logResult(containerId, message, success = true) {
            const container = document.getElementById(containerId);
            const timestamp = new Date().toLocaleTimeString();
            const badge = success ? 
                '<span class="badge bg-success">æˆåŠŸ</span>' : 
                '<span class="badge bg-danger">å¤±è´¥</span>';
            
            container.innerHTML += `<div>${badge} [${timestamp}] ${message}</div>`;
            container.scrollTop = container.scrollHeight;
        }

        function clearResult(containerId) {
            document.getElementById(containerId).innerHTML = '';
        }

        function getUserId() {
            return parseInt(document.getElementById('userId').value) || defaultUserId;
        }

        function getReportType() {
            return document.getElementById('reportType').value;
        }

        function getExportOptions() {
            return {
                includeCharts: document.getElementById('includeCharts').checked,
                includeStats: document.getElementById('includeStats').checked,
                includeAI: document.getElementById('includeAI').checked,
                includeRecommendations: document.getElementById('includeRecommendations').checked
            };
        }

        // 1. æŠ¥å‘Šç³»ç»ŸAPIæµ‹è¯•
        async function testWeeklyReport() {
            clearResult('api-result-1');
            try {
                const userId = getUserId();
                const response = await fetch(`/api/reports/weekly/${userId}`);
                const data = await response.json();
                currentReportData = data;
                logResult('api-result-1', `è·å–å‘¨æŠ¥æˆåŠŸ: ${JSON.stringify(data).substring(0, 200)}...`);
            } catch (error) {
                logResult('api-result-1', `é”™è¯¯: ${error.message}`, false);
            }
        }

        async function testMonthlyReport() {
            clearResult('api-result-1');
            try {
                const userId = getUserId();
                const year = new Date().getFullYear();
                const month = new Date().getMonth() + 1;
                const response = await fetch(`/api/reports/monthly/${userId}/${year}/${month}`);
                const data = await response.json();
                currentReportData = data;
                logResult('api-result-1', `è·å–æœˆæŠ¥æˆåŠŸ: ${JSON.stringify(data).substring(0, 200)}...`);
            } catch (error) {
                logResult('api-result-1', `é”™è¯¯: ${error.message}`, false);
            }
        }

        async function testGenerateReport() {
            clearResult('api-result-1');
            try {
                const userId = getUserId();
                const reportType = getReportType();
                const response = await fetch(`/api/reports/generate`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        user_id: userId,
                        report_type: reportType,
                        start_date: new Date().toISOString().split('T')[0]
                    })
                });
                const data = await response.json();
                currentReportData = data;
                logResult('api-result-1', `ç”ŸæˆæŠ¥å‘ŠæˆåŠŸ: ${JSON.stringify(data).substring(0, 200)}...`);
            } catch (error) {
                logResult('api-result-1', `é”™è¯¯: ${error.message}`, false);
            }
        }

        async function testReportHistory() {
            clearResult('api-result-1');
            try {
                const userId = getUserId();
                const response = await fetch(`/api/reports/history/${userId}?limit=5`);
                const data = await response.json();
                logResult('api-result-1', `è·å–æŠ¥å‘Šå†å²: ${JSON.stringify(data).substring(0, 200)}...`);
            } catch (error) {
                logResult('api-result-1', `é”™è¯¯: ${error.message}`, false);
            }
        }

        // 2. æŠ¥å‘Šåˆ†äº«åŠŸèƒ½æµ‹è¯•
        async function testShareAsImage() {
            clearResult('api-result-2');
            if (!currentReportData) {
                logResult('api-result-2', 'è¯·å…ˆè·å–æŠ¥å‘Šæ•°æ®', false);
                return;
            }

            try {
                const userId = getUserId();
                const response = await fetch(`/api/reports/share/image`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        user_id: userId,
                        report_data: currentReportData,
                        format: 'png',
                        quality: 'high'
                    })
                });
                const data = await response.json();
                logResult('api-result-2', `ç”Ÿæˆå›¾ç‰‡åˆ†äº«: ${JSON.stringify(data)}`);
                
                if (data.image_url) {
                    window.open(data.image_url, '_blank');
                }
            } catch (error) {
                logResult('api-result-2', `é”™è¯¯: ${error.message}`, false);
            }
        }

        async function testShareAsPDF() {
            clearResult('api-result-2');
            if (!currentReportData) {
                logResult('api-result-2', 'è¯·å…ˆè·å–æŠ¥å‘Šæ•°æ®', false);
                return;
            }

            try {
                const userId = getUserId();
                const response = await fetch(`/api/reports/share/pdf`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        user_id: userId,
                        report_data: currentReportData,
                        include_charts: true,
                        include_stats: true
                    })
                });
                const data = await response.json();
                logResult('api-result-2', `ç”ŸæˆPDFåˆ†äº«: ${JSON.stringify(data)}`);
                
                if (data.pdf_url) {
                    window.open(data.pdf_url, '_blank');
                }
            } catch (error) {
                logResult('api-result-2', `é”™è¯¯: ${error.message}`, false);
            }
        }

        async function testShareAsText() {
            clearResult('api-result-2');
            if (!currentReportData) {
                logResult('api-result-2', 'è¯·å…ˆè·å–æŠ¥å‘Šæ•°æ®', false);
                return;
            }

            try {
                const userId = getUserId();
                const response = await fetch(`/api/reports/share/text`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        user_id: userId,
                        report_data: currentReportData,
                        format: 'markdown'
                    })
                });
                const data = await response.json();
                logResult('api-result-2', `ç”Ÿæˆæ–‡æœ¬åˆ†äº«: ${JSON.stringify(data)}`);
                
                if (data.text_content) {
                    navigator.clipboard.writeText(data.text_content).then(() => {
                        alert('æ–‡æœ¬å†…å®¹å·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
                    });
                }
            } catch (error) {
                logResult('api-result-2', `é”™è¯¯: ${error.message}`, false);
            }
        }

        async function testGenerateShareLink() {
            clearResult('api-result-2');
            if (!currentReportData) {
                logResult('api-result-2', 'è¯·å…ˆè·å–æŠ¥å‘Šæ•°æ®', false);
                return;
            }

            try {
                const userId = getUserId();
                const response = await fetch(`/api/reports/share/link`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        user_id: userId,
                        report_data: currentReportData,
                        expires_in: 86400 // 24å°æ—¶
                    })
                });
                const data = await response.json();
                logResult('api-result-2', `ç”Ÿæˆåˆ†äº«é“¾æ¥: ${JSON.stringify(data)}`);
                
                if (data.share_url) {
                    document.getElementById('share-link').innerHTML = `
                        <p>åˆ†äº«é“¾æ¥: <a href="${data.share_url}" target="_blank">${data.share_url}</a></p>
                        <p>æœ‰æ•ˆæœŸ: ${data.expires_at}</p>
                    `;
                }
            } catch (error) {
                logResult('api-result-2', `é”™è¯¯: ${error.message}`, false);
            }
        }

        // åˆ†äº«åˆ°ç¤¾äº¤å¹³å°
        function shareToWeChat() {
            logResult('api-result-2', 'å¾®ä¿¡åˆ†äº«åŠŸèƒ½ï¼ˆæ¨¡æ‹Ÿï¼‰');
            alert('å¾®ä¿¡åˆ†äº«åŠŸèƒ½éœ€è¦æ¥å…¥å¾®ä¿¡JS-SDK');
        }

        function shareToQQ() {
            logResult('api-result-2', 'QQåˆ†äº«åŠŸèƒ½ï¼ˆæ¨¡æ‹Ÿï¼‰');
            alert('QQåˆ†äº«åŠŸèƒ½éœ€è¦æ¥å…¥QQäº’è”SDK');
        }

        function shareToWeibo() {
            logResult('api-result-2', 'å¾®åšåˆ†äº«åŠŸèƒ½ï¼ˆæ¨¡æ‹Ÿï¼‰');
            alert('å¾®åšåˆ†äº«åŠŸèƒ½éœ€è¦æ¥å…¥å¾®åšå¼€æ”¾å¹³å°');
        }

        function copyShareLink() {
            if (currentReportData) {
                const shareText = `æˆ‘çš„ä½“é‡ç®¡ç†æŠ¥å‘Šï¼š\nä½“é‡å˜åŒ–: ${currentReportData.weight_change || 'N/A'}\nè¿åŠ¨å®Œæˆç‡: ${currentReportData.exercise_completion_rate || 'N/A'}%\n`;
                navigator.clipboard.writeText(shareText).then(() => {
                    logResult('api-result-2', 'åˆ†äº«æ–‡æœ¬å·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
                });
            } else {
                logResult('api-result-2', 'è¯·å…ˆè·å–æŠ¥å‘Šæ•°æ®', false);
            }
        }

        // 3. æ•°æ®å¯¼å‡ºåŠŸèƒ½æµ‹è¯•
        async function exportAsJSON() {
            clearResult('api-result-3');
            if (!currentReportData) {
                logResult('api-result-3', 'è¯·å…ˆè·å–æŠ¥å‘Šæ•°æ®', false);
                return;
            }

            try {
                const exportOptions = getExportOptions();
                const exportData = {
                    report: currentReportData,
                    export_options: exportOptions,
                    exported_at: new Date().toISOString()
                };

                const blob = new Blob([JSON.stringify(exportData, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `report_${getUserId()}_${new Date().toISOString().split('T')[0]}.json`;
                a.click();
                URL.revokeObjectURL(url);
                
                logResult('api-result-3', 'JSONæ–‡ä»¶å·²å¼€å§‹ä¸‹è½½');
            } catch (error) {
                logResult('api-result-3', `é”™è¯¯: ${error.message}`, false);
            }
        }

        async function exportAsCSV() {
            clearResult('api-result-3');
            if (!currentReportData) {
                logResult('api-result-3', 'è¯·å…ˆè·å–æŠ¥å‘Šæ•°æ®', false);
                return;
            }

            try {
                // æ¨¡æ‹ŸCSVæ•°æ®
                const csvData = [
                    ['æŒ‡æ ‡', 'æ•°å€¼', 'å•ä½'],
                    ['èµ·å§‹ä½“é‡', currentReportData.start_weight || 'N/A', 'kg'],
                    ['å½“å‰ä½“é‡', currentReportData.current_weight || 'N/A', 'kg'],
                    ['ä½“é‡å˜åŒ–', currentReportData.weight_change || 'N/A', 'kg'],
                    ['è¿åŠ¨å®Œæˆç‡', currentReportData.exercise_completion_rate || 'N/A', '%'],
                    ['é¥®æ°´å®Œæˆç‡', currentReportData.water_completion_rate || 'N/A', '%'],
                    ['æŠ¥å‘Šæ—¥æœŸ', new Date().toLocaleDateString(), '']
                ];

                const csvContent = csvData.map(row => row.join(',')).join('\n');
                const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `report_${getUserId()}_${new Date().toISOString().split('T')[0]}.csv`;
                a.click();
                URL.revokeObjectURL(url);
                
                logResult('api-result-3', 'CSVæ–‡ä»¶å·²å¼€å§‹ä¸‹è½½');
            } catch (error) {
                logResult('api-result-3', `é”™è¯¯: ${error.message}`, false);
            }
        }

        async function exportAsExcel() {
            clearResult('api-result-3');
            logResult('api-result-3', 'Excelå¯¼å‡ºåŠŸèƒ½éœ€è¦å®‰è£…xlsxåº“');
            alert('Excelå¯¼å‡ºåŠŸèƒ½éœ€è¦åç«¯æ”¯æŒxlsxåº“');
        }

        async function testBatchExport() {
            clearResult('api-result-3');
            try {
                const userId = getUserId();
                const response = await fetch(`/api/reports/export/batch/${userId}?format=json&limit=3`);
                const data = await response.json();
                logResult('api-result-3', `æ‰¹é‡å¯¼å‡º: ${JSON.stringify(data).substring(0, 200)}...`);
            } catch (error) {
                logResult('api-result-3', `é”™è¯¯: ${error.message}`, false);
            }
        }

        // 4. æŠ¥å‘Šé¢„è§ˆ
        async function loadReportPreview() {
            clearResult('api-result-4');
            if (!currentReportData) {
                await testWeeklyReport();
            }

            try {
                const preview = document.getElementById('report-preview');
                const report = currentReportData || {};
                
                preview.innerHTML = `
                    <h4>ä½“é‡ç®¡ç†æŠ¥å‘Šé¢„è§ˆ</h4>
                    <hr>
                    <div class="row">
                        <div class="col-md-6">
                            <h5>åŸºæœ¬ä¿¡æ¯</h5>
                            <p><strong>æŠ¥å‘Šç±»å‹:</strong> ${report.report_type || 'å‘¨æŠ¥'}</p>
                            <p><strong>æŠ¥å‘Šå‘¨æœŸ:</strong> ${report.period || 'æœ¬å‘¨'}</p>
                            <p><strong>ç”Ÿæˆæ—¶é—´:</strong> ${new Date().toLocaleString()}</p>
                        </div>
                        <div class="col-md-6">
                            <h5>å…³é”®æŒ‡æ ‡</h5>
                            <p><strong>ä½“é‡å˜åŒ–:</strong> ${report.weight_change || '0'} kg</p>
                            <p><strong>è¿åŠ¨å®Œæˆç‡:</strong> ${report.exercise_completion_rate || '0'}%</p>
                            <p><strong>é¥®æ°´å®Œæˆç‡:</strong> ${report.water_completion_rate || '0'}%</p>
                        </div>
                    </div>
                    <hr>
                    <h5>è¯¦ç»†ç»Ÿè®¡</h5>
                    <div class="row">
                        <div class="col-md-4">
                            <p><strong>å¹³å‡æ¯æ—¥æ­¥æ•°:</strong> ${report.avg_steps || '0'}</p>
                            <p><strong>å¹³å‡æ¯æ—¥çƒ­é‡:</strong> ${report.avg_calories || '0'} kcal</p>
                        </div>
                        <div class="col-md-4">
                            <p><strong>è¿åŠ¨å¤©æ•°:</strong> ${report.exercise_days || '0'} å¤©</p>
                            <p><strong>ä¼‘æ¯å¤©æ•°:</strong> ${report.rest_days || '0'} å¤©</p>
                        </div>
                        <div class="col-md-4">
                            <p><strong>æœ€ä½³ä½“é‡:</strong> ${report.best_weight || 'N/A'} kg</p>
                            <p><strong>æœ€å·®ä½“é‡:</strong> ${report.worst_weight || 'N/A'} kg</p>
                        </div>
                    </div>
                    <hr>
                    <h5>AIåˆ†æå»ºè®®</h5>
                    <p>${report.ai_analysis || 'æš‚æ— AIåˆ†ææ•°æ®'}</p>
                    <hr>
                    <h5>ä¸‹å‘¨å»ºè®®</h5>
                    <p>${report.recommendations || 'æš‚æ— å»ºè®®'}</p>
                `;
                
                logResult('api-result-4', 'æŠ¥å‘Šé¢„è§ˆåŠ è½½æˆåŠŸ');
            } catch (error) {
                logResult('api-result-4', `é”™è¯¯: ${error.message}`, false);
            }
        }

        function refreshPreview() {
            loadReportPreview();
        }

        function printPreview() {
            window.print();
        }

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('system-status').innerHTML = `
                <p><span class="badge bg-success">ç³»ç»Ÿå°±ç»ª</span> å¯ä»¥å¼€å§‹æµ‹è¯•</p>
                <p>é»˜è®¤ç”¨æˆ·ID: ${defaultUserId}</p>
                <p>å½“å‰æ—¶é—´: ${new Date().toLocaleString()}</p>
                <p>æ”¯æŒçš„æŠ¥å‘Šç±»å‹: å‘¨æŠ¥ã€æœˆæŠ¥</p>
                <p>æ”¯æŒçš„åˆ†äº«æ ¼å¼: å›¾ç‰‡ã€PDFã€æ–‡æœ¬ã€é“¾æ¥</p>
                <p>æ”¯æŒçš„å¯¼å‡ºæ ¼å¼: JSONã€CSV</p>
            `;
        });

        // è‡ªåŠ¨åŠ è½½ç¤ºä¾‹æ•°æ®
        setTimeout(() => {
            testWeeklyReport();
        }, 1000);
    </script>
</body>
</html>