<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é¤é£Ÿå›¾ç‰‡æ˜¾ç¤ºæµ‹è¯•</title>
    <style>
        :root {
            --primary-color: #3498db;
            --success-color: #2ecc71;
            --background: #ffffff;
            --text-primary: #333333;
            --text-muted: #666666;
            --border-color: #e0e0e0;
            --transition-fast: 0.2s;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 20px;
            background: #f5f5f5;
        }
        
        .container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: var(--text-primary);
            margin-bottom: 20px;
            text-align: center;
        }
        
        /* ä¸Šä¼ åŒºåŸŸæ ·å¼ï¼ˆä»meal.htmlå¤åˆ¶ï¼‰ */
        .upload-zone {
            border: 2px dashed var(--border-color);
            border-radius: 12px;
            padding: 40px 20px;
            text-align: center;
            cursor: pointer;
            transition: all var(--transition-fast);
            background: var(--background);
            margin-bottom: 20px;
        }
        
        .upload-zone:hover {
            border-color: var(--primary-color);
            background: rgba(52, 152, 219, 0.05);
        }
        
        .upload-zone.has-image {
            border-style: solid;
            border-color: var(--success-color);
            padding: 0;
            overflow: hidden;
        }
        
        .upload-icon {
            font-size: 4rem;
            margin-bottom: 16px;
            opacity: 0.6;
        }
        
        .upload-text {
            font-size: 1.125rem;
            color: var(--text-primary);
            font-weight: 500;
            margin-bottom: 8px;
        }
        
        .upload-hint {
            font-size: 0.875rem;
            color: var(--text-muted);
        }
        
        .upload-input {
            display: none;
        }
        
        /* ä¿®å¤åçš„å›¾ç‰‡é¢„è§ˆæ ·å¼ */
        .image-preview {
            position: relative;
            width: 100%;
            height: 400px;
            max-height: 500px;
            overflow: hidden;
            background: #f8f9fa;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .image-preview img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            display: block;
        }
        
        .image-actions {
            position: absolute;
            top: 12px;
            right: 12px;
            display: flex;
            gap: 8px;
        }
        
        .image-action-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: rgba(0, 0, 0, 0.6);
            color: white;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 18px;
            transition: background var(--transition-fast);
        }
        
        .image-action-btn:hover {
            background: rgba(0, 0, 0, 0.8);
        }
        
        .upload-placeholder {
            padding: 40px 20px;
        }
        
        /* æµ‹è¯•è¯´æ˜ */
        .instructions {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            font-size: 14px;
            line-height: 1.5;
        }
        
        .instructions h3 {
            margin-top: 0;
            color: var(--text-primary);
        }
        
        .test-images {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 15px;
        }
        
        .test-image-btn {
            padding: 10px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: background var(--transition-fast);
        }
        
        .test-image-btn:hover {
            background: #2980b9;
        }
        
        .status {
            padding: 10px;
            border-radius: 6px;
            margin-top: 15px;
            font-weight: bold;
            text-align: center;
        }
        
        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .status.info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“¸ é¤é£Ÿå›¾ç‰‡æ˜¾ç¤ºæµ‹è¯•</h1>
        
        <div class="upload-zone" id="upload-zone">
            <div class="upload-placeholder" id="upload-placeholder">
                <div class="upload-icon">ğŸ“·</div>
                <div class="upload-text">ç‚¹å‡»æˆ–æ‹–æ‹½ä¸Šä¼ é¤é£Ÿç…§ç‰‡</div>
                <div class="upload-hint">æ”¯æŒ JPGã€PNG æ ¼å¼</div>
                <input type="file" id="file-input" class="upload-input" accept="image/*">
            </div>
            <div class="image-preview" id="image-preview" style="display: none;">
                <img id="preview-img" src="" alt="é¤é£Ÿé¢„è§ˆ">
                <div class="image-actions">
                    <button class="image-action-btn" onclick="clearImage()">âœ•</button>
                </div>
            </div>
        </div>
        
        <div class="instructions">
            <h3>æµ‹è¯•è¯´æ˜ï¼š</h3>
            <p>æµ‹è¯•ä¿®å¤åçš„å›¾ç‰‡æ˜¾ç¤ºæ•ˆæœï¼š</p>
            <ul>
                <li><strong>ä¹‹å‰çš„é—®é¢˜</strong>ï¼šå›¾ç‰‡è¢«è£å‰ªï¼Œåªèƒ½æ˜¾ç¤ºä¸€éƒ¨åˆ†</li>
                <li><strong>ä¿®å¤æ–¹æ¡ˆ</strong>ï¼šä½¿ç”¨ <code>object-fit: contain</code> ä¿æŒæ¯”ä¾‹å®Œæ•´æ˜¾ç¤º</li>
                <li><strong>æµ‹è¯•æ–¹æ³•</strong>ï¼šä¸Šä¼ ä¸åŒå°ºå¯¸çš„å›¾ç‰‡ï¼ŒæŸ¥çœ‹æ˜¯å¦å®Œæ•´æ˜¾ç¤º</li>
            </ul>
            
            <div class="test-images">
                <button class="test-image-btn" onclick="loadTestImage('portrait')">æµ‹è¯•ç«–ç‰ˆå›¾ç‰‡</button>
                <button class="test-image-btn" onclick="loadTestImage('landscape')">æµ‹è¯•æ¨ªç‰ˆå›¾ç‰‡</button>
                <button class="test-image-btn" onclick="loadTestImage('square')">æµ‹è¯•æ­£æ–¹å½¢å›¾ç‰‡</button>
                <button class="test-image-btn" onclick="loadTestImage('large')">æµ‹è¯•å¤§å°ºå¯¸å›¾ç‰‡</button>
            </div>
        </div>
        
        <div id="status-message" class="status info">
            è¯·ä¸Šä¼ å›¾ç‰‡æˆ–ç‚¹å‡»æµ‹è¯•æŒ‰é’®
        </div>
    </div>
    
    <script>
        // åˆå§‹åŒ–ä¸Šä¼ åŒºåŸŸ
        document.addEventListener('DOMContentLoaded', function() {
            const uploadZone = document.getElementById('upload-zone');
            const fileInput = document.getElementById('file-input');
            
            // ç‚¹å‡»ä¸Šä¼ 
            uploadZone.addEventListener('click', function(e) {
                if (e.target.closest('.image-actions')) return;
                fileInput.click();
            });
            
            // æ–‡ä»¶é€‰æ‹©
            fileInput.addEventListener('change', function(e) {
                if (this.files.length > 0) {
                    handleImageSelect(this.files[0]);
                }
            });
            
            // æ‹–æ‹½ä¸Šä¼ 
            uploadZone.addEventListener('dragover', function(e) {
                e.preventDefault();
                uploadZone.classList.add('drag-over');
            });
            
            uploadZone.addEventListener('dragleave', function(e) {
                e.preventDefault();
                uploadZone.classList.remove('drag-over');
            });
            
            uploadZone.addEventListener('drop', function(e) {
                e.preventDefault();
                uploadZone.classList.remove('drag-over');
                
                const files = e.dataTransfer.files;
                if (files.length > 0 && files[0].type.startsWith('image/')) {
                    handleImageSelect(files[0]);
                }
            });
        });
        
        // å¤„ç†å›¾ç‰‡é€‰æ‹©
        function handleImageSelect(file) {
            const reader = new FileReader();
            reader.onload = (e) => {
                document.getElementById('preview-img').src = e.target.result;
                document.getElementById('upload-placeholder').style.display = 'none';
                document.getElementById('image-preview').style.display = 'block';
                document.getElementById('upload-zone').classList.add('has-image');
                
                // æ˜¾ç¤ºå›¾ç‰‡ä¿¡æ¯
                const img = document.getElementById('preview-img');
                img.onload = function() {
                    updateStatus(`å›¾ç‰‡å·²åŠ è½½: ${file.name}<br>å°ºå¯¸: ${this.naturalWidth} Ã— ${this.naturalHeight}px`, 'success');
                };
            };
            reader.readAsDataURL(file);
        }
        
        // æ¸…é™¤å›¾ç‰‡
        function clearImage() {
            document.getElementById('upload-placeholder').style.display = 'block';
            document.getElementById('image-preview').style.display = 'none';
            document.getElementById('upload-zone').classList.remove('has-image');
            document.getElementById('preview-img').src = '';
            document.getElementById('file-input').value = '';
            updateStatus('å›¾ç‰‡å·²æ¸…é™¤', 'info');
        }
        
        // åŠ è½½æµ‹è¯•å›¾ç‰‡
        function loadTestImage(type) {
            let url, name;
            
            switch(type) {
                case 'portrait':
                    url = 'https://images.unsplash.com/photo-1512621776951-a57141f2eefd?ixlib=rb-1.2.1&auto=format&fit=crop&w=600&h=800&q=80';
                    name = 'ç«–ç‰ˆé¤é£Ÿå›¾ç‰‡';
                    break;
                case 'landscape':
                    url = 'https://images.unsplash.com/photo-1546069901-ba9599a7e63c?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&h=600&q=80';
                    name = 'æ¨ªç‰ˆé¤é£Ÿå›¾ç‰‡';
                    break;
                case 'square':
                    url = 'https://images.unsplash.com/photo-1565958011703-44f9829ba187?ixlib=rb-1.2.1&auto=format&fit=crop&w=600&h=600&q=80';
                    name = 'æ­£æ–¹å½¢é¤é£Ÿå›¾ç‰‡';
                    break;
                case 'large':
                    url = 'https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?ixlib=rb-1.2.1&auto=format&fit=crop&w=1200&h=800&q=80';
                    name = 'å¤§å°ºå¯¸é¤é£Ÿå›¾ç‰‡';
                    break;
            }
            
            // æ¨¡æ‹Ÿæ–‡ä»¶ä¸Šä¼ 
            fetch(url)
                .then(response => response.blob())
                .then(blob => {
                    const file = new File([blob], `${name}.jpg`, { type: 'image/jpeg' });
                    handleImageSelect(file);
                })
                .catch(error => {
                    updateStatus(`åŠ è½½æµ‹è¯•å›¾ç‰‡å¤±è´¥: ${error.message}`, 'info');
                });
        }
        
        // æ›´æ–°çŠ¶æ€ä¿¡æ¯
        function updateStatus(message, type) {
            const statusEl = document.getElementById('status-message');
            statusEl.innerHTML = message;
            statusEl.className = `status ${type}`;
        }
        
        // æ·»åŠ ä¸€äº›æ§åˆ¶å°è°ƒè¯•ä¿¡æ¯
        console.log('å›¾ç‰‡æ˜¾ç¤ºæµ‹è¯•é¡µé¢å·²åŠ è½½');
        console.log('object-fit æ”¯æŒæ£€æµ‹:', 'objectFit' in document.documentElement.style);
    </script>
</body>
</html>